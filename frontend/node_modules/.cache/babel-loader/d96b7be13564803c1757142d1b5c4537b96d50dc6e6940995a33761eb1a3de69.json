{"ast":null,"code":"// Redesigned TaskBoard - Professional replacement using design system\nimport React,{useState,useEffect}from'react';import{useParams,useNavigate,useLocation}from'react-router-dom';import{useQuery,useQueryClient,useMutation}from'@tanstack/react-query';import{useAuth}from'../contexts/AuthContext';import{useApp}from'../contexts/AppContext';import{useWebSocket}from'../contexts/WebSocketContext';import{useNotification}from'../hooks/useNotification';import{Card,Button,Text,GradientText,IconButton,Badge,LoadingSpinner,EmptyState,ErrorMessage,Modal,Progress,BackIcon,EditIcon,TrashIcon,CheckIcon,DocumentDuplicateIcon,Label,tokens}from'../design-system';import TreeVisualization from'../components/TreeVisualization';import DecompositionStatus from'../components/DecompositionStatus';import PendingApprovalsPanel from'../components/PendingApprovalsPanel';import ExportModal from'../components/ExportModal';import{formatDetailedDate}from'../utils/dateUtils';import{useTaskData}from'../hooks/useTaskData';import{getApplicationTypes,getTechStacksForType,getTechStackById}from'../config/techStacks';import apiClient from'../services/unifiedApiClient';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const TaskBoard=()=>{var _location$state,_taskTree$children2,_selectedTask$task_id,_selectedTask$status;const{taskId}=useParams();const navigate=useNavigate();const location=useLocation();const{isAuthenticated}=useAuth();const{setGlobalLoading}=useApp();const{connected,subscribe}=useWebSocket();const{showNotification}=useNotification();const queryClient=useQueryClient();// Check if this task was just created\nconst justCreated=(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.justCreated;// Local state\nconst[showDeleteModal,setShowDeleteModal]=useState(false);const[showRestartModal,setShowRestartModal]=useState(false);const[isDecomposing,setIsDecomposing]=useState(false);const[selectedTask,setSelectedTask]=useState(null);// Track selected subtask for sidebar\nconst[editMode,setEditMode]=useState(false);// New: Edit mode for inline editing\nconst[editFormData,setEditFormData]=useState({});// New: Form data for editing\n// Show immediate feedback if task was just created (only once)\nuseEffect(()=>{if(justCreated){console.log('TaskBoard: Showing justCreated notification');showNotification('Task created! AI decomposition is starting...','success');// Start polling for updates if WebSocket isn't working\nif(!connected){console.log('TaskBoard: Starting polling fallback');const pollInterval=setInterval(()=>{queryClient.invalidateQueries(['task',taskId]);queryClient.invalidateQueries(['taskTree',taskId]);},2000);// Stop polling after 2 minutes\nsetTimeout(()=>{clearInterval(pollInterval);},120000);return()=>clearInterval(pollInterval);}}},[justCreated,taskId]);// Removed potentially unstable dependencies\n// Fetch task data\nconst{data:task,isLoading:taskLoading,error:taskError,refetch:refetchTask}=useQuery({queryKey:['task',taskId],queryFn:()=>apiClient.getTask(taskId),enabled:!!taskId&&isAuthenticated(),staleTime:30000});// Fetch task tree\nconst{data:taskTree,isLoading:treeLoading,error:treeError,refetch:refetchTree}=useQuery({queryKey:['taskTree',taskId],queryFn:()=>apiClient.getTaskTree(taskId),enabled:!!taskId&&isAuthenticated(),staleTime:30000});// Get task data at component level (React Hooks rule compliance)\nconst{techStack}=useTaskData(task,true);// Determine if task is actually being decomposed based on real data\nuseEffect(()=>{if(task&&taskTree){var _taskTree$children;console.log('TaskBoard: Evaluating decomposition status',{taskStatus:task.status,childrenCount:task.children_count,treeChildren:(_taskTree$children=taskTree.children)===null||_taskTree$children===void 0?void 0:_taskTree$children.length,justCreated});const hasSubtasks=task.children_count&&task.children_count>0||taskTree.children&&taskTree.children.length>0;const isTaskCompleted=task.status==='completed';const isProcessing=task.status==='processing'||task.status==='in_progress';// Task is decomposing only if it's actively processing\n// Don't show decomposition status on page refresh unless actively processing\nconst shouldBeDecomposing=isProcessing||justCreated&&!hasSubtasks&&!isTaskCompleted;console.log('TaskBoard: Setting isDecomposing to:',shouldBeDecomposing);setIsDecomposing(shouldBeDecomposing);}else if(justCreated){// If task data isn't loaded yet but was just created, assume decomposing\nconsole.log('TaskBoard: Task data not loaded, but justCreated - assuming decomposing');setIsDecomposing(true);}else{// After page refresh, don't show decomposition status unless actively processing\nsetIsDecomposing(false);}},[task===null||task===void 0?void 0:task.status,task===null||task===void 0?void 0:task.children_count,taskTree===null||taskTree===void 0?void 0:(_taskTree$children2=taskTree.children)===null||_taskTree$children2===void 0?void 0:_taskTree$children2.length,justCreated]);// More specific dependencies\n// Update task status mutation\nconst updateTaskMutation=useMutation({mutationFn:_ref=>{let{taskId,status}=_ref;return apiClient.updateTask(taskId,{status});},onSuccess:()=>{queryClient.invalidateQueries(['task',taskId]);queryClient.invalidateQueries(['taskTree',taskId]);queryClient.invalidateQueries(['tasks']);showNotification('Task status updated successfully','success');},onError:error=>{showNotification(error.userMessage||'Failed to update task status','error');}});// Delete task mutation\nconst deleteTaskMutation=useMutation({mutationFn:taskId=>apiClient.deleteTask(taskId),onSuccess:()=>{queryClient.invalidateQueries(['tasks']);showNotification('Task deleted successfully','success');navigate('/dashboard');},onError:error=>{showNotification(error.userMessage||'Failed to delete task','error');}});// Restart decomposition mutation\nconst restartDecompositionMutation=useMutation({mutationFn:_ref2=>{let{taskId,restartData}=_ref2;return apiClient.restartDecomposition(taskId,restartData);},onSuccess:()=>{queryClient.invalidateQueries(['task',taskId]);queryClient.invalidateQueries(['taskTree',taskId]);queryClient.invalidateQueries(['tasks']);setShowRestartModal(false);setIsDecomposing(true);// Start showing decomposition status\nshowNotification('Decomposition restarted successfully!','success');},onError:error=>{showNotification(error.userMessage||'Failed to restart decomposition','error');}});// Subscribe to WebSocket updates\nuseEffect(()=>{if(taskId&&connected){console.log('TaskBoard WebSocket setup:',{taskId,connected});const handleWebSocketEvent=event=>{console.log('TaskBoard received WebSocket event:',event);// Handle events for this specific task or its subtasks \n// Check if event is for this task directly OR if this task is the root of the event's hierarchy\nconst isForThisTask=event.task_id===taskId;const isForSubtask=event.root_task_id===taskId;if(isForThisTask||isForSubtask){console.log('Processing event for task:',taskId,event.type);if(event.type==='task.updated'||event.type==='task.created'||event.type==='task.status_changed'||event.type==='task.completed'){queryClient.invalidateQueries(['task',taskId]);queryClient.invalidateQueries(['taskTree',taskId]);// Show different notifications based on event type\nif(event.type==='task.completed'){showNotification('Task completed!','success');}else if(event.type==='task.status_changed'){var _event$data;const status=event.status||((_event$data=event.data)===null||_event$data===void 0?void 0:_event$data.status);if(status==='completed'){showNotification('Task status updated to completed!','success');}else{showNotification(`Task status updated to ${status}!`,'info');}}else{showNotification(`Task ${event.type.split('.')[1]}!`,'info');}}// Handle decomposition events\nif(event.type==='decomposition.started'){setIsDecomposing(true);showNotification('Decomposition started!','info');}else if(event.type==='decomposition.completed'||event.type==='decomposition.error'){setIsDecomposing(false);}// Detect decomposition start from task creation events\nif(event.type==='task.created'&&event.parent_id===taskId){console.log('Detected decomposition start from task creation');setIsDecomposing(true);showNotification('Subtask created! Decomposition in progress...','success');}}else{console.log('Ignoring event - not for our task:',{eventTaskId:event.task_id,eventParentId:event.parent_id,eventRootTaskId:event.root_task_id,ourTaskId:taskId,isForThisTask,isForSubtask});}};const unsubscribe=subscribe(handleWebSocketEvent);return unsubscribe;}else if(taskId&&!connected){console.log('WebSocket not connected, cannot subscribe to events');}},[taskId,connected]);// Minimal dependencies\n// Handle loading states\nconst isLoading=taskLoading||treeLoading;const error=taskError||treeError;// Calculate task statistics\nconst taskStats=React.useMemo(()=>{if(!taskTree)return{total:0,completed:0,pending:0,inProgress:0,awaitingApproval:0};const calculateStats=function(node){let stats=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{total:0,completed:0,pending:0,inProgress:0,awaitingApproval:0};stats.total++;switch(node.status){case'completed':stats.completed++;break;case'in_progress':case'processing':stats.inProgress++;break;case'awaiting_approval':stats.awaitingApproval++;break;default:stats.pending++;}if(node.children){node.children.forEach(child=>calculateStats(child,stats));}return stats;};return calculateStats(taskTree);},[taskTree]);const handleStatusChange=(taskId,newStatus)=>{updateTaskMutation.mutate({taskId,status:newStatus});};const handleDeleteTask=()=>{setGlobalLoading(true);deleteTaskMutation.mutate(taskId,{onSettled:()=>setGlobalLoading(false)});};const handleDecompositionComplete=()=>{// Refresh the task tree when decomposition completes\nqueryClient.invalidateQueries(['task',taskId]);queryClient.invalidateQueries(['taskTree',taskId]);showNotification('Task decomposition completed successfully!','success');};// Loading state\nif(isLoading){return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'center',minHeight:'400px',flexDirection:'column',gap:tokens.spacing[4]},children:[/*#__PURE__*/_jsx(LoadingSpinner,{size:\"lg\"}),/*#__PURE__*/_jsx(Text,{style:{color:'var(--color-text-muted)'},children:\"Loading task details...\"})]});}// Error state\nif(error){return/*#__PURE__*/_jsx(\"div\",{className:\"container\",style:{paddingTop:tokens.spacing[8]},children:/*#__PURE__*/_jsx(ErrorMessage,{title:\"Failed to Load Task\",message:error.userMessage||'Unable to load task details',onRetry:()=>{refetchTask();refetchTree();}})});}// Not found state\nif(!task){return/*#__PURE__*/_jsx(\"div\",{className:\"container\",style:{paddingTop:tokens.spacing[8]},children:/*#__PURE__*/_jsx(EmptyState,{icon:DocumentDuplicateIcon,title:\"Task Not Found\",description:\"The requested task could not be found or you don't have access to it.\",action:/*#__PURE__*/_jsx(Button,{onClick:()=>navigate('/dashboard'),icon:BackIcon,children:\"Back to Dashboard\"})})});}const completionRate=taskStats.total>0?Math.round(taskStats.completed/taskStats.total*100):0;// Debug logging for completion rate\nconsole.log('TaskBoard completion rate:',{completionRate,taskStats,isFullyComplete:completionRate===100});// Initialize edit form with current task data\nconst initializeEditForm=()=>{setEditFormData({description:(task===null||task===void 0?void 0:task.description)||'',application_type:(techStack===null||techStack===void 0?void 0:techStack.application_type)||'',tech_stack_id:(techStack===null||techStack===void 0?void 0:techStack.tech_stack_id)||'',max_depth:3,max_subtasks:10,complexity_threshold:0.7,requires_approval:false,preserve_root_context:true,tech_preferences:{additional_requirements:(techStack===null||techStack===void 0?void 0:techStack.additional_requirements)||''}});};// Handle edit form submission\nconst handleEditSubmit=()=>{const restartData={...editFormData,tech_preferences:{...editFormData.tech_preferences,application_type:editFormData.application_type,tech_stack_id:editFormData.tech_stack_id}};restartDecompositionMutation.mutate({taskId,restartData});setEditMode(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",style:{paddingTop:tokens.spacing[6]},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'flex-start',justifyContent:'space-between',marginBottom:tokens.spacing[8],gap:tokens.spacing[6]},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:tokens.spacing[4],marginBottom:tokens.spacing[3]},children:[/*#__PURE__*/_jsx(Button,{variant:\"ghost\",size:\"sm\",icon:BackIcon,onClick:()=>navigate('/dashboard'),children:\"Dashboard\"}),/*#__PURE__*/_jsx(ConnectionStatus,{connected:connected})]}),editMode?/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:tokens.spacing[4]},children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"description\",children:\"Task Description\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"description\",value:editFormData.description,onChange:e=>setEditFormData({...editFormData,description:e.target.value}),placeholder:\"Describe what you want to build...\",rows:3,style:{width:'100%',padding:tokens.spacing[2],borderRadius:tokens.borderRadius.md,border:'1px solid var(--color-border)',backgroundColor:'var(--color-surface)',color:'var(--color-text)',fontSize:tokens.typography.fontSize.sm[0],resize:'vertical',outline:'none',boxSizing:'border-box',fontFamily:'inherit',marginBottom:tokens.spacing[3]}})]}):/*#__PURE__*/_jsx(\"span\",{style:{fontSize:tokens.typography.fontSize['3xl'][0],lineHeight:tokens.typography.lineHeight.tight,fontWeight:tokens.typography.fontWeight.bold,marginBottom:tokens.spacing[2],color:tokens.colors.primary[500],display:'block'},children:task.description}),editMode?/*#__PURE__*/_jsx(EditForm,{formData:editFormData,setFormData:setEditFormData,onSubmit:handleEditSubmit,onCancel:()=>setEditMode(false),isLoading:restartDecompositionMutation.isPending}):/*#__PURE__*/_jsx(TaskMetadata,{task:task})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:tokens.spacing[2]},children:[!editMode&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ExportModal,{task:task,localTaskTree:taskTree,onShowToast:showNotification}),task.status!=='completed'&&/*#__PURE__*/_jsx(Button,{variant:\"success\",size:\"sm\",icon:CheckIcon,onClick:()=>handleStatusChange(task.task_id,'completed'),loading:updateTaskMutation.isPending,title:\"Mark this task as completed\",children:\"Mark Complete\"}),/*#__PURE__*/_jsx(IconButton,{icon:TrashIcon,variant:\"danger\",size:\"sm\",onClick:()=>setShowDeleteModal(true),title:\"Delete task\"})]}),!task.parent_id&&/*#__PURE__*/_jsx(Button,{variant:editMode?\"outline\":\"outline\",size:\"sm\",icon:EditIcon,onClick:()=>{if(editMode){setEditMode(false);}else{setEditMode(true);initializeEditForm();}},title:editMode?\"Exit edit mode\":\"Edit task\",children:editMode?\"Cancel Edit\":\"Edit\"})]})]}),/*#__PURE__*/_jsx(CompactStats,{taskStats:taskStats,completionRate:completionRate}),/*#__PURE__*/_jsx(DecompositionStatus,{taskId:taskId,isDecomposing:isDecomposing,onDecompositionComplete:handleDecompositionComplete}),/*#__PURE__*/_jsx(PendingApprovalsPanel,{parentTaskId:taskId}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'2fr 1fr',gap:tokens.spacing[6],marginBottom:tokens.spacing[6],width:'100%',overflow:'hidden'},className:\"task-board-layout\",children:[/*#__PURE__*/_jsx(\"div\",{style:{minWidth:0,overflow:'hidden'},children:/*#__PURE__*/_jsx(TreeVisualization,{taskTree:taskTree,onStatusChange:handleStatusChange,updating:updateTaskMutation.isPending,onTaskSelect:setSelectedTask,onRefreshTree:refetchTree})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:tokens.spacing[6],minWidth:0},children:[/*#__PURE__*/_jsxs(Card,{title:selectedTask?\"Selected Task Details\":\"Task Details\",children:[selectedTask&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:tokens.spacing[3],padding:tokens.spacing[2],backgroundColor:'var(--color-surface)',borderRadius:tokens.borderRadius.sm,fontSize:tokens.typography.fontSize.xs[0],color:'var(--color-text-muted)'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Task ID:\"}),\" \",(_selectedTask$task_id=selectedTask.task_id)===null||_selectedTask$task_id===void 0?void 0:_selectedTask$task_id.substring(0,8),\"... |\",/*#__PURE__*/_jsx(\"strong\",{children:\" Status:\"}),\" \",(_selectedTask$status=selectedTask.status)===null||_selectedTask$status===void 0?void 0:_selectedTask$status.replace('_',' '),\" |\",/*#__PURE__*/_jsx(\"strong\",{children:\" Atomic:\"}),\" \",selectedTask.is_atomic?'Yes':'No']}),/*#__PURE__*/_jsx(TechStackDisplay,{task:selectedTask||task}),/*#__PURE__*/_jsx(Text,{style:{marginBottom:tokens.spacing[4],lineHeight:tokens.typography.lineHeight.relaxed},children:(selectedTask||task).description}),(selectedTask||task).implementation_details&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Text,{style:{fontWeight:tokens.typography.fontWeight.semibold,marginBottom:tokens.spacing[2],fontSize:tokens.typography.fontSize.sm[0],color:'var(--color-text-muted)',textTransform:'uppercase',letterSpacing:tokens.typography.letterSpacing.wide},children:[\"Implementation Details\",(selectedTask||task).is_atomic&&/*#__PURE__*/_jsx(Badge,{variant:\"success\",size:\"sm\",style:{marginLeft:tokens.spacing[2]},children:\"Atomic Task\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{color:'var(--color-text)',fontSize:tokens.typography.fontSize.sm[0],lineHeight:tokens.typography.lineHeight.normal,backgroundColor:'var(--color-surface)',border:'1px solid var(--color-border)',borderRadius:tokens.borderRadius.md,padding:tokens.spacing[3],whiteSpace:'pre-wrap',fontFamily:tokens.typography.fontFamily.mono,maxHeight:'300px',minHeight:'100px',overflowY:'scroll',overflowX:'hidden',wordWrap:'break-word',wordBreak:'break-word'},children:(selectedTask||task).implementation_details})]}),(selectedTask||task).additional_context&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Text,{style:{fontWeight:tokens.typography.fontWeight.semibold,marginBottom:tokens.spacing[2],fontSize:tokens.typography.fontSize.sm[0],color:'var(--color-text-muted)',textTransform:'uppercase',letterSpacing:tokens.typography.letterSpacing.wide,marginTop:tokens.spacing[4]},children:\"Additional Context\"}),/*#__PURE__*/_jsx(Text,{style:{color:'var(--color-text-muted)',fontSize:tokens.typography.fontSize.sm[0],lineHeight:tokens.typography.lineHeight.relaxed},children:(selectedTask||task).additional_context})]})]}),/*#__PURE__*/_jsx(Card,{title:\"Progress Summary\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:tokens.spacing[4]},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Text,{style:{fontSize:tokens.typography.fontSize.sm[0],color:'var(--color-text-muted)',margin:0,marginBottom:tokens.spacing[2]},children:[\"Overall Progress (\",completionRate,\"%)\"]}),/*#__PURE__*/_jsx(Progress,{value:completionRate,variant:completionRate===100?'success':'primary'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',fontSize:tokens.typography.fontSize.sm[0]},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'var(--color-text-muted)'},children:\"Pending:\"}),/*#__PURE__*/_jsx(\"span\",{style:{color:tokens.colors.warning[500]},children:taskStats.pending})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',fontSize:tokens.typography.fontSize.sm[0]},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'var(--color-text-muted)'},children:\"In Progress:\"}),/*#__PURE__*/_jsx(\"span\",{style:{color:tokens.colors.info[500]},children:taskStats.inProgress})]}),taskStats.awaitingApproval>0&&/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',fontSize:tokens.typography.fontSize.sm[0]},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'var(--color-text-muted)'},children:\"Awaiting Approval:\"}),/*#__PURE__*/_jsx(\"span\",{style:{color:tokens.colors.error[500]},children:taskStats.awaitingApproval})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',fontSize:tokens.typography.fontSize.sm[0]},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'var(--color-text-muted)'},children:\"Completed:\"}),/*#__PURE__*/_jsx(\"span\",{style:{color:tokens.colors.success[500]},children:taskStats.completed})]})]})})]})]}),/*#__PURE__*/_jsxs(Modal,{isOpen:showDeleteModal,onClose:()=>setShowDeleteModal(false),title:\"Delete Task\",children:[/*#__PURE__*/_jsx(Text,{style:{marginBottom:tokens.spacing[6]},children:\"Are you sure you want to delete this task? This action cannot be undone. All subtasks will also be permanently deleted.\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'flex-end',gap:tokens.spacing[3]},children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>setShowDeleteModal(false),children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:handleDeleteTask,loading:deleteTaskMutation.isPending,children:\"Delete Task\"})]})]}),/*#__PURE__*/_jsx(RestartDecompositionModal,{isOpen:showRestartModal,onClose:()=>setShowRestartModal(false),task:task,onRestart:restartData=>restartDecompositionMutation.mutate({taskId,restartData}),isLoading:restartDecompositionMutation.isPending})]});};// Connection Status Component\nconst ConnectionStatus=_ref3=>{let{connected}=_ref3;return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:tokens.spacing[2]},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'8px',height:'8px',borderRadius:tokens.borderRadius.full,backgroundColor:connected?tokens.colors.success[500]:tokens.colors.error[500]}}),/*#__PURE__*/_jsx(Text,{style:{fontSize:tokens.typography.fontSize.xs[0],color:'var(--color-text-muted)',margin:0},children:connected?'Live':'Offline'})]});};// Task Metadata Component\nconst TaskMetadata=_ref4=>{let{task}=_ref4;return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexWrap:'wrap',gap:tokens.spacing[4],alignItems:'center'},children:[/*#__PURE__*/_jsx(Badge,{variant:getStatusVariant(task.status),children:task.status.replace('_',' ')}),task.created_at&&/*#__PURE__*/_jsxs(Text,{style:{fontSize:tokens.typography.fontSize.sm[0],color:'var(--color-text-muted)',margin:0},children:[\"Created \",formatDetailedDate(task.created_at)]}),task.children_count!==undefined&&/*#__PURE__*/_jsxs(Text,{style:{fontSize:tokens.typography.fontSize.sm[0],color:'var(--color-text-muted)',margin:0},children:[task.children_count,\" subtasks\"]})]});};// Compact Statistics Component\nconst CompactStats=_ref5=>{let{taskStats,completionRate}=_ref5;return/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(100px, 1fr))',gap:tokens.spacing[3],padding:tokens.spacing[3],marginBottom:tokens.spacing[4]},className:\"compact-stats\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center'},children:[/*#__PURE__*/_jsx(Text,{style:{fontSize:tokens.typography.fontSize.lg[0],fontWeight:tokens.typography.fontWeight.bold,color:tokens.colors.primary[500],margin:0},children:taskStats.total}),/*#__PURE__*/_jsx(Text,{style:{fontSize:tokens.typography.fontSize.xs[0],color:'var(--color-text-muted)',margin:0},children:\"Total\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center'},children:[/*#__PURE__*/_jsx(Text,{style:{fontSize:tokens.typography.fontSize.lg[0],fontWeight:tokens.typography.fontWeight.bold,color:tokens.colors.success[500],margin:0},children:taskStats.completed}),/*#__PURE__*/_jsx(Text,{style:{fontSize:tokens.typography.fontSize.xs[0],color:'var(--color-text-muted)',margin:0},children:\"Done\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center'},children:[/*#__PURE__*/_jsx(Text,{style:{fontSize:tokens.typography.fontSize.lg[0],fontWeight:tokens.typography.fontWeight.bold,color:tokens.colors.warning[500],margin:0},children:taskStats.inProgress}),/*#__PURE__*/_jsx(Text,{style:{fontSize:tokens.typography.fontSize.xs[0],color:'var(--color-text-muted)',margin:0},children:\"Active\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center'},children:[/*#__PURE__*/_jsx(Text,{style:{fontSize:tokens.typography.fontSize.lg[0],fontWeight:tokens.typography.fontWeight.bold,color:tokens.colors.info[500],margin:0},children:taskStats.pending}),/*#__PURE__*/_jsx(Text,{style:{fontSize:tokens.typography.fontSize.xs[0],color:'var(--color-text-muted)',margin:0},children:\"Pending\"})]}),taskStats.awaitingApproval>0&&/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center'},children:[/*#__PURE__*/_jsx(Text,{style:{fontSize:tokens.typography.fontSize.lg[0],fontWeight:tokens.typography.fontWeight.bold,color:tokens.colors.error[500],margin:0},children:taskStats.awaitingApproval}),/*#__PURE__*/_jsx(Text,{style:{fontSize:tokens.typography.fontSize.xs[0],color:'var(--color-text-muted)',margin:0},children:\"Approval\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center'},children:[/*#__PURE__*/_jsxs(Text,{style:{fontSize:tokens.typography.fontSize.lg[0],fontWeight:tokens.typography.fontWeight.bold,color:completionRate===100?tokens.colors.success[500]:tokens.colors.primary[400],margin:0},children:[completionRate,\"%\"]}),/*#__PURE__*/_jsx(Text,{style:{fontSize:tokens.typography.fontSize.xs[0],color:'var(--color-text-muted)',margin:0},children:\"Complete\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{gridColumn:'1 / -1',marginTop:tokens.spacing[1]},children:/*#__PURE__*/_jsx(Progress,{value:completionRate,variant:completionRate===100?'success':'primary',style:{height:'3px'}})})]})});};// Tech Stack Display Component\nconst TechStackDisplay=_ref6=>{var _techStack$backend,_techStack$backend2;let{task}=_ref6;const{techStack,projectStandards}=useTaskData(task,true);// Only show for root tasks that have tech stack data\nif(!task||task.depth>0||!techStack||Object.keys(techStack).length===0){return null;}// Helper function to render tech stack section\nconst renderTechStackItem=(label,value)=>{if(!value)return null;// If value is an object, extract meaningful properties\nif(typeof value==='object'&&!Array.isArray(value)){const parts=[];// Handle frontend object\nif(label==='Frontend'&&value.framework){parts.push(value.framework);if(value.libraries&&Array.isArray(value.libraries)&&value.libraries.length>0){parts.push(`Libraries: ${value.libraries.join(', ')}`);}if(value.styling){parts.push(`Styling: ${value.styling}`);}return parts.length>0?parts.join(' | '):'Not specified';}// Handle backend object\nif(label==='Backend'){if(value.language)parts.push(value.language);if(value.framework)parts.push(value.framework);if(value.api)parts.push(`API: ${value.api}`);return parts.length>0?parts.join(' | '):'Not specified';}// Handle database object\nif(label==='Database'){if(typeof value==='string')return value;if(value.type)return value.type;if(value.database)return value.database;}// Handle devops object\nif(label==='DevOps'){if(value.containerization)parts.push(`Containerization: ${value.containerization}`);if(value.ci_cd)parts.push(`CI/CD: ${value.ci_cd}`);if(value.hosting)parts.push(`Hosting: ${value.hosting}`);if(value.orchestration)parts.push(`Orchestration: ${value.orchestration}`);return parts.length>0?parts.join(' | '):null;}// Default: try to extract meaningful values from object\nconst meaningfulValues=Object.values(value).filter(v=>v&&typeof v==='string');return meaningfulValues.length>0?meaningfulValues.join(' | '):null;}// If value is array, join it\nif(Array.isArray(value)){return value.join(', ');}// If value is string, return as is\nreturn String(value);};return/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:tokens.spacing[4]},children:[/*#__PURE__*/_jsx(Text,{style:{fontWeight:tokens.typography.fontWeight.semibold,marginBottom:tokens.spacing[2],fontSize:tokens.typography.fontSize.sm[0],color:'var(--color-text-muted)',textTransform:'uppercase',letterSpacing:tokens.typography.letterSpacing.wide},children:\"Tech Stack\"}),/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'var(--color-surface)',border:'1px solid var(--color-border)',borderRadius:tokens.borderRadius.md,padding:tokens.spacing[3],fontSize:tokens.typography.fontSize.sm[0]},children:[techStack.frontend&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:tokens.spacing[2]},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Frontend:\"}),\" \",renderTechStackItem('Frontend',techStack.frontend)]}),techStack.backend&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:tokens.spacing[2]},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Backend:\"}),\" \",renderTechStackItem('Backend',techStack.backend)]}),(((_techStack$backend=techStack.backend)===null||_techStack$backend===void 0?void 0:_techStack$backend.database)||techStack.database)&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:tokens.spacing[2]},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Database:\"}),\" \",renderTechStackItem('Database',((_techStack$backend2=techStack.backend)===null||_techStack$backend2===void 0?void 0:_techStack$backend2.database)||techStack.database)]}),techStack.devops&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:tokens.spacing[2]},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"DevOps:\"}),\" \",renderTechStackItem('DevOps',techStack.devops)]}),techStack.testing&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:tokens.spacing[2]},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Testing:\"}),\" \",renderTechStackItem('Testing',techStack.testing)]}),techStack.additional_tools&&Array.isArray(techStack.additional_tools)&&techStack.additional_tools.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:tokens.spacing[2]},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Additional Tools:\"}),\" \",techStack.additional_tools.join(', ')]})]})]});};// EditForm Component - Inline editing form for task parameters\nconst EditForm=_ref7=>{var _formData$tech_prefer;let{formData,setFormData,onSubmit,onCancel,isLoading}=_ref7;const applicationTypes=getApplicationTypes();const techStacks=getTechStacksForType(formData.application_type);return/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'var(--color-surface)',border:'1px solid var(--color-border)',borderRadius:tokens.borderRadius.lg,padding:tokens.spacing[4],marginBottom:tokens.spacing[4]},children:[/*#__PURE__*/_jsx(Text,{style:{fontSize:tokens.typography.fontSize.lg[0],fontWeight:tokens.typography.fontWeight.semibold,marginBottom:tokens.spacing[4],color:'var(--color-primary-500)'},children:\"Edit Task Parameters\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:tokens.spacing[3]},children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"application_type\",children:\"Application Type\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"application_type\",value:formData.application_type,onChange:e=>{setFormData({...formData,application_type:e.target.value,tech_stack_id:''// Reset tech stack when app type changes\n});},style:{width:'100%',padding:tokens.spacing[2],borderRadius:tokens.borderRadius.md,border:'1px solid var(--color-border)',backgroundColor:'var(--color-surface)',color:'var(--color-text)',fontSize:tokens.typography.fontSize.sm[0]},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Application Type\"}),applicationTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type.id,children:type.label},type.id))]})]}),formData.application_type&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:tokens.spacing[3]},children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"tech_stack_id\",children:\"Tech Stack\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"tech_stack_id\",value:formData.tech_stack_id,onChange:e=>setFormData({...formData,tech_stack_id:e.target.value}),style:{width:'100%',padding:tokens.spacing[2],borderRadius:tokens.borderRadius.md,border:'1px solid var(--color-border)',backgroundColor:'var(--color-surface)',color:'var(--color-text)',fontSize:tokens.typography.fontSize.sm[0]},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Tech Stack\"}),techStacks.map(stack=>/*#__PURE__*/_jsx(\"option\",{value:stack.id,children:stack.name},stack.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:tokens.spacing[3]},children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"additional_requirements\",children:\"Additional Requirements\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"additional_requirements\",value:((_formData$tech_prefer=formData.tech_preferences)===null||_formData$tech_prefer===void 0?void 0:_formData$tech_prefer.additional_requirements)||'',onChange:e=>setFormData({...formData,tech_preferences:{...formData.tech_preferences,additional_requirements:e.target.value}}),placeholder:\"Any specific requirements or constraints...\",rows:2,style:{width:'100%',padding:tokens.spacing[2],borderRadius:tokens.borderRadius.md,border:'1px solid var(--color-border)',backgroundColor:'var(--color-surface)',color:'var(--color-text)',fontSize:tokens.typography.fontSize.sm[0],resize:'vertical',fontFamily:'inherit'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr 1fr',gap:tokens.spacing[3],marginBottom:tokens.spacing[4]},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"max_depth\",children:\"Max Depth\"}),/*#__PURE__*/_jsx(\"input\",{id:\"max_depth\",type:\"number\",min:\"1\",max:\"5\",value:formData.max_depth,onChange:e=>setFormData({...formData,max_depth:parseInt(e.target.value)}),style:{width:'100%',padding:tokens.spacing[2],borderRadius:tokens.borderRadius.md,border:'1px solid var(--color-border)',backgroundColor:'var(--color-surface)',color:'var(--color-text)',fontSize:tokens.typography.fontSize.sm[0]}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"max_subtasks\",children:\"Max Subtasks\"}),/*#__PURE__*/_jsx(\"input\",{id:\"max_subtasks\",type:\"number\",min:\"2\",max:\"15\",value:formData.max_subtasks,onChange:e=>setFormData({...formData,max_subtasks:parseInt(e.target.value)}),style:{width:'100%',padding:tokens.spacing[2],borderRadius:tokens.borderRadius.md,border:'1px solid var(--color-border)',backgroundColor:'var(--color-surface)',color:'var(--color-text)',fontSize:tokens.typography.fontSize.sm[0]}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"complexity_threshold\",children:\"Complexity Threshold\"}),/*#__PURE__*/_jsx(\"input\",{id:\"complexity_threshold\",type:\"number\",min:\"0.1\",max:\"1.0\",step:\"0.1\",value:formData.complexity_threshold,onChange:e=>setFormData({...formData,complexity_threshold:parseFloat(e.target.value)}),style:{width:'100%',padding:tokens.spacing[2],borderRadius:tokens.borderRadius.md,border:'1px solid var(--color-border)',backgroundColor:'var(--color-surface)',color:'var(--color-text)',fontSize:tokens.typography.fontSize.sm[0]}})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:tokens.spacing[2],justifyContent:'flex-end'},children:[/*#__PURE__*/_jsx(Button,{variant:\"outline\",size:\"sm\",onClick:onCancel,disabled:isLoading,icon:TrashIcon,children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",size:\"sm\",onClick:onSubmit,disabled:isLoading||!formData.description.trim(),icon:CheckIcon,loading:isLoading,children:\"Save & Restart Decomposition\"})]})]});};// RestartDecompositionModal Component\nconst RestartDecompositionModal=_ref8=>{let{isOpen,onClose,task,onRestart,isLoading}=_ref8;// Get task data at component level (React Hooks rule compliance)\nconst{techStack}=useTaskData(task,true);const[formData,setFormData]=useState({description:'',application_type:'',tech_stack_id:'',max_depth:3,max_subtasks:10,complexity_threshold:0.7,requires_approval:false,preserve_root_context:true,tech_preferences:{additional_requirements:''}});// Initialize form data when modal opens\nuseEffect(()=>{if(isOpen&&task){// Use the techStack from the hook called at component level\nsetFormData({description:task.description||'',application_type:'',tech_stack_id:'',max_depth:3,max_subtasks:10,complexity_threshold:0.7,requires_approval:false,preserve_root_context:true,tech_preferences:{additional_requirements:''}});}},[isOpen,task]);const handleSubmit=()=>{const restartData={...formData,tech_preferences:{...formData.tech_preferences,application_type:formData.application_type,tech_stack_id:formData.tech_stack_id}};// Remove top-level application_type and tech_stack_id since they're now in tech_preferences\ndelete restartData.application_type;delete restartData.tech_stack_id;onRestart(restartData);};const applicationTypes=getApplicationTypes();const availableTechStacks=formData.application_type?getTechStacksForType(formData.application_type):[];const selectedTechStack=formData.application_type&&formData.tech_stack_id?getTechStackById(formData.application_type,formData.tech_stack_id):null;if(!isOpen)return null;return/*#__PURE__*/_jsxs(Modal,{isOpen:isOpen,onClose:onClose,title:\"Restart Decomposition\",size:\"lg\",children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:tokens.spacing[4]},children:/*#__PURE__*/_jsx(Text,{style:{color:'var(--color-text-muted)'},children:\"This will delete all existing subtasks and restart the decomposition process with new parameters. You can update the task description, tech stack preferences, and AI parameters.\"})}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:tokens.spacing[4]},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',fontSize:tokens.typography.fontSize.sm[0],fontWeight:tokens.typography.fontWeight.medium,color:'var(--color-text)',marginBottom:tokens.spacing[2]},children:\"Updated Task Description (optional)\"}),/*#__PURE__*/_jsx(\"textarea\",{value:formData.description,onChange:e=>setFormData(prev=>({...prev,description:e.target.value})),placeholder:\"Leave empty to keep current description\",style:{width:'100%',minHeight:'80px',padding:tokens.spacing[3],borderRadius:tokens.borderRadius.md,border:'1px solid var(--color-border)',backgroundColor:'var(--color-surface)',color:'var(--color-text)',fontSize:tokens.typography.fontSize.sm[0],resize:'vertical'},rows:3})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:tokens.spacing[4]},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',fontSize:tokens.typography.fontSize.sm[0],fontWeight:tokens.typography.fontWeight.medium,color:'var(--color-text)',marginBottom:tokens.spacing[2]},children:\"Application Type\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.application_type,onChange:e=>setFormData(prev=>({...prev,application_type:e.target.value,tech_stack_id:''// Reset tech stack when application type changes\n})),style:{width:'100%',padding:tokens.spacing[3],borderRadius:tokens.borderRadius.md,border:'1px solid var(--color-border)',backgroundColor:'var(--color-surface)',color:'var(--color-text)',fontSize:tokens.typography.fontSize.sm[0]},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Keep current tech stack / Let AI choose\"}),applicationTypes.map(type=>/*#__PURE__*/_jsxs(\"option\",{value:type.id,children:[type.label,\" - \",type.description]},type.id))]})]}),formData.application_type&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:tokens.spacing[4]},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',fontSize:tokens.typography.fontSize.sm[0],fontWeight:tokens.typography.fontWeight.medium,color:'var(--color-text)',marginBottom:tokens.spacing[2]},children:\"Tech Stack\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.tech_stack_id,onChange:e=>setFormData(prev=>({...prev,tech_stack_id:e.target.value})),style:{width:'100%',padding:tokens.spacing[3],borderRadius:tokens.borderRadius.md,border:'1px solid var(--color-border)',backgroundColor:'var(--color-surface)',color:'var(--color-text)',fontSize:tokens.typography.fontSize.sm[0]},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Let AI choose tech stack\"}),availableTechStacks.map(stack=>/*#__PURE__*/_jsxs(\"option\",{value:stack.id,children:[stack.name,\" - \",stack.description]},stack.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:tokens.spacing[4]},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',fontSize:tokens.typography.fontSize.sm[0],fontWeight:tokens.typography.fontWeight.medium,color:'var(--color-text)',marginBottom:tokens.spacing[2]},children:\"Additional Requirements & Overrides\"}),/*#__PURE__*/_jsx(\"textarea\",{value:formData.tech_preferences.additional_requirements,onChange:e=>setFormData(prev=>({...prev,tech_preferences:{...prev.tech_preferences,additional_requirements:e.target.value}})),placeholder:\"e.g., Use different database, add real-time features, specific frameworks...\",style:{width:'100%',minHeight:'60px',padding:tokens.spacing[3],borderRadius:tokens.borderRadius.md,border:'1px solid var(--color-border)',backgroundColor:'var(--color-surface)',color:'var(--color-text)',fontSize:tokens.typography.fontSize.sm[0],resize:'vertical'},rows:2})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(120px, 1fr))',gap:tokens.spacing[4],marginBottom:tokens.spacing[4]},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',fontSize:tokens.typography.fontSize.sm[0],fontWeight:tokens.typography.fontWeight.medium,color:'var(--color-text)',marginBottom:tokens.spacing[2]},children:\"Max Depth\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.max_depth,onChange:e=>setFormData(prev=>({...prev,max_depth:parseInt(e.target.value)})),style:{width:'100%',padding:tokens.spacing[2],borderRadius:tokens.borderRadius.md,border:'1px solid var(--color-border)',backgroundColor:'var(--color-surface)',color:'var(--color-text)',fontSize:tokens.typography.fontSize.sm[0]},children:[/*#__PURE__*/_jsx(\"option\",{value:2,children:\"2 levels\"}),/*#__PURE__*/_jsx(\"option\",{value:3,children:\"3 levels\"}),/*#__PURE__*/_jsx(\"option\",{value:4,children:\"4 levels\"}),/*#__PURE__*/_jsx(\"option\",{value:5,children:\"5 levels\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',fontSize:tokens.typography.fontSize.sm[0],fontWeight:tokens.typography.fontWeight.medium,color:'var(--color-text)',marginBottom:tokens.spacing[2]},children:\"Max Subtasks\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.max_subtasks,onChange:e=>setFormData(prev=>({...prev,max_subtasks:parseInt(e.target.value)})),style:{width:'100%',padding:tokens.spacing[2],borderRadius:tokens.borderRadius.md,border:'1px solid var(--color-border)',backgroundColor:'var(--color-surface)',color:'var(--color-text)',fontSize:tokens.typography.fontSize.sm[0]},children:[/*#__PURE__*/_jsx(\"option\",{value:5,children:\"5 subtasks\"}),/*#__PURE__*/_jsx(\"option\",{value:10,children:\"10 subtasks\"}),/*#__PURE__*/_jsx(\"option\",{value:15,children:\"15 subtasks\"}),/*#__PURE__*/_jsx(\"option\",{value:20,children:\"20 subtasks\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:tokens.spacing[6]},children:[/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',alignItems:'center',gap:tokens.spacing[2],cursor:'pointer',marginBottom:tokens.spacing[3]},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:formData.requires_approval,onChange:e=>setFormData(prev=>({...prev,requires_approval:e.target.checked})),style:{width:'16px',height:'16px',accentColor:tokens.colors.primary[500]}}),/*#__PURE__*/_jsx(Text,{style:{margin:0,fontSize:tokens.typography.fontSize.sm[0]},children:\"Pause for approval after decomposition\"})]}),/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',alignItems:'center',gap:tokens.spacing[2],cursor:'pointer'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:formData.preserve_root_context,onChange:e=>setFormData(prev=>({...prev,preserve_root_context:e.target.checked})),style:{width:'16px',height:'16px',accentColor:tokens.colors.primary[500]}}),/*#__PURE__*/_jsx(Text,{style:{margin:0,fontSize:tokens.typography.fontSize.sm[0]},children:\"Preserve existing tech stack and best practices (recommended)\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'flex-end',gap:tokens.spacing[3]},children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:onClose,disabled:isLoading,children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleSubmit,loading:isLoading,children:\"Restart Decomposition\"})]})]});};// Helper functions\nconst getStatusVariant=status=>{switch(status){case'completed':return'success';case'in_progress':case'processing':return'info';case'awaiting_approval':return'danger';case'error':case'failed':return'danger';default:return'warning';}};export default TaskBoard;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","useLocation","useQuery","useQueryClient","useMutation","useAuth","useApp","useWebSocket","useNotification","Card","Button","Text","GradientText","IconButton","Badge","LoadingSpinner","EmptyState","ErrorMessage","Modal","Progress","BackIcon","EditIcon","TrashIcon","CheckIcon","DocumentDuplicateIcon","Label","tokens","TreeVisualization","DecompositionStatus","PendingApprovalsPanel","ExportModal","formatDetailedDate","useTaskData","getApplicationTypes","getTechStacksForType","getTechStackById","apiClient","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TaskBoard","_location$state","_taskTree$children2","_selectedTask$task_id","_selectedTask$status","taskId","navigate","location","isAuthenticated","setGlobalLoading","connected","subscribe","showNotification","queryClient","justCreated","state","showDeleteModal","setShowDeleteModal","showRestartModal","setShowRestartModal","isDecomposing","setIsDecomposing","selectedTask","setSelectedTask","editMode","setEditMode","editFormData","setEditFormData","console","log","pollInterval","setInterval","invalidateQueries","setTimeout","clearInterval","data","task","isLoading","taskLoading","error","taskError","refetch","refetchTask","queryKey","queryFn","getTask","enabled","staleTime","taskTree","treeLoading","treeError","refetchTree","getTaskTree","techStack","_taskTree$children","taskStatus","status","childrenCount","children_count","treeChildren","children","length","hasSubtasks","isTaskCompleted","isProcessing","shouldBeDecomposing","updateTaskMutation","mutationFn","_ref","updateTask","onSuccess","onError","userMessage","deleteTaskMutation","deleteTask","restartDecompositionMutation","_ref2","restartData","restartDecomposition","handleWebSocketEvent","event","isForThisTask","task_id","isForSubtask","root_task_id","type","_event$data","split","parent_id","eventTaskId","eventParentId","eventRootTaskId","ourTaskId","unsubscribe","taskStats","useMemo","total","completed","pending","inProgress","awaitingApproval","calculateStats","node","stats","arguments","undefined","forEach","child","handleStatusChange","newStatus","mutate","handleDeleteTask","onSettled","handleDecompositionComplete","style","display","alignItems","justifyContent","minHeight","flexDirection","gap","spacing","size","color","className","paddingTop","title","message","onRetry","icon","description","action","onClick","completionRate","Math","round","isFullyComplete","initializeEditForm","application_type","tech_stack_id","max_depth","max_subtasks","complexity_threshold","requires_approval","preserve_root_context","tech_preferences","additional_requirements","handleEditSubmit","marginBottom","flex","variant","ConnectionStatus","htmlFor","id","value","onChange","e","target","placeholder","rows","width","padding","borderRadius","md","border","backgroundColor","fontSize","typography","sm","resize","outline","boxSizing","fontFamily","lineHeight","tight","fontWeight","bold","colors","primary","EditForm","formData","setFormData","onSubmit","onCancel","isPending","TaskMetadata","localTaskTree","onShowToast","loading","CompactStats","onDecompositionComplete","parentTaskId","gridTemplateColumns","overflow","minWidth","onStatusChange","updating","onTaskSelect","onRefreshTree","xs","substring","replace","is_atomic","TechStackDisplay","relaxed","implementation_details","semibold","textTransform","letterSpacing","wide","marginLeft","normal","whiteSpace","mono","maxHeight","overflowY","overflowX","wordWrap","wordBreak","additional_context","marginTop","margin","warning","info","success","isOpen","onClose","RestartDecompositionModal","onRestart","_ref3","height","full","_ref4","flexWrap","getStatusVariant","created_at","_ref5","textAlign","lg","gridColumn","_ref6","_techStack$backend","_techStack$backend2","projectStandards","depth","Object","keys","renderTechStackItem","label","Array","isArray","parts","framework","push","libraries","join","styling","language","api","database","containerization","ci_cd","hosting","orchestration","meaningfulValues","values","filter","v","String","frontend","backend","devops","testing","additional_tools","_ref7","_formData$tech_prefer","applicationTypes","techStacks","map","stack","name","min","max","parseInt","step","parseFloat","disabled","trim","_ref8","handleSubmit","availableTechStacks","selectedTechStack","medium","prev","cursor","checked","accentColor"],"sources":["/app/src/pages/TaskBoard.js"],"sourcesContent":["// Redesigned TaskBoard - Professional replacement using design system\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate, useLocation } from 'react-router-dom';\nimport { useQuery, useQueryClient, useMutation } from '@tanstack/react-query';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useApp } from '../contexts/AppContext';\nimport { useWebSocket } from '../contexts/WebSocketContext';\nimport { useNotification } from '../hooks/useNotification';\nimport {\n  Card,\n  Button,\n  Text,\n  GradientText,\n  IconButton,\n  Badge,\n  LoadingSpinner,\n  EmptyState,\n  ErrorMessage,\n  Modal,\n  Progress,\n  BackIcon,\n  EditIcon,\n  TrashIcon,\n  CheckIcon,\n  DocumentDuplicateIcon,\n  Label,\n  tokens,\n} from '../design-system';\nimport TreeVisualization from '../components/TreeVisualization';\nimport DecompositionStatus from '../components/DecompositionStatus';\nimport PendingApprovalsPanel from '../components/PendingApprovalsPanel';\nimport ExportModal from '../components/ExportModal';\nimport { formatDetailedDate } from '../utils/dateUtils';\nimport { useTaskData } from '../hooks/useTaskData';\nimport { getApplicationTypes, getTechStacksForType, getTechStackById } from '../config/techStacks';\nimport apiClient from '../services/unifiedApiClient';\n\nconst TaskBoard = () => {\n  const { taskId } = useParams();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { isAuthenticated } = useAuth();\n  const { setGlobalLoading } = useApp();\n  const { connected, subscribe } = useWebSocket();\n  const { showNotification } = useNotification();\n  const queryClient = useQueryClient();\n\n  // Check if this task was just created\n  const justCreated = location.state?.justCreated;\n  \n  // Local state\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n  const [showRestartModal, setShowRestartModal] = useState(false);\n  const [isDecomposing, setIsDecomposing] = useState(false);\n  const [selectedTask, setSelectedTask] = useState(null); // Track selected subtask for sidebar\n  const [editMode, setEditMode] = useState(false); // New: Edit mode for inline editing\n  const [editFormData, setEditFormData] = useState({}); // New: Form data for editing\n\n  // Show immediate feedback if task was just created (only once)\n  useEffect(() => {\n    if (justCreated) {\n      console.log('TaskBoard: Showing justCreated notification');\n      showNotification('Task created! AI decomposition is starting...', 'success');\n      \n      // Start polling for updates if WebSocket isn't working\n      if (!connected) {\n        console.log('TaskBoard: Starting polling fallback');\n        const pollInterval = setInterval(() => {\n          queryClient.invalidateQueries(['task', taskId]);\n          queryClient.invalidateQueries(['taskTree', taskId]);\n        }, 2000);\n        \n        // Stop polling after 2 minutes\n        setTimeout(() => {\n          clearInterval(pollInterval);\n        }, 120000);\n        \n        return () => clearInterval(pollInterval);\n      }\n    }\n  }, [justCreated, taskId]); // Removed potentially unstable dependencies\n\n  // Fetch task data\n  const {\n    data: task,\n    isLoading: taskLoading,\n    error: taskError,\n    refetch: refetchTask,\n  } = useQuery({\n    queryKey: ['task', taskId],\n    queryFn: () => apiClient.getTask(taskId),\n    enabled: !!taskId && isAuthenticated(),\n    staleTime: 30000,\n  });\n\n  // Fetch task tree\n  const {\n    data: taskTree,\n    isLoading: treeLoading,\n    error: treeError,\n    refetch: refetchTree,\n  } = useQuery({\n    queryKey: ['taskTree', taskId],\n    queryFn: () => apiClient.getTaskTree(taskId),\n    enabled: !!taskId && isAuthenticated(),\n    staleTime: 30000,\n  });\n\n  // Get task data at component level (React Hooks rule compliance)\n  const { techStack } = useTaskData(task, true);\n\n  // Determine if task is actually being decomposed based on real data\n  useEffect(() => {\n    if (task && taskTree) {\n      console.log('TaskBoard: Evaluating decomposition status', { \n        taskStatus: task.status, \n        childrenCount: task.children_count,\n        treeChildren: taskTree.children?.length,\n        justCreated \n      });\n      \n      const hasSubtasks = (task.children_count && task.children_count > 0) || \n                         (taskTree.children && taskTree.children.length > 0);\n      const isTaskCompleted = task.status === 'completed';\n      const isProcessing = task.status === 'processing' || task.status === 'in_progress';\n      \n      // Task is decomposing only if it's actively processing\n      // Don't show decomposition status on page refresh unless actively processing\n      const shouldBeDecomposing = isProcessing || (justCreated && !hasSubtasks && !isTaskCompleted);\n      \n      console.log('TaskBoard: Setting isDecomposing to:', shouldBeDecomposing);\n      setIsDecomposing(shouldBeDecomposing);\n    } else if (justCreated) {\n      // If task data isn't loaded yet but was just created, assume decomposing\n      console.log('TaskBoard: Task data not loaded, but justCreated - assuming decomposing');\n      setIsDecomposing(true);\n    } else {\n      // After page refresh, don't show decomposition status unless actively processing\n      setIsDecomposing(false);\n    }\n  }, [task?.status, task?.children_count, taskTree?.children?.length, justCreated]); // More specific dependencies\n\n  // Update task status mutation\n  const updateTaskMutation = useMutation({\n    mutationFn: ({ taskId, status }) => apiClient.updateTask(taskId, { status }),\n    onSuccess: () => {\n      queryClient.invalidateQueries(['task', taskId]);\n      queryClient.invalidateQueries(['taskTree', taskId]);\n      queryClient.invalidateQueries(['tasks']);\n      showNotification('Task status updated successfully', 'success');\n    },\n    onError: (error) => {\n      showNotification(error.userMessage || 'Failed to update task status', 'error');\n    },\n  });\n\n  // Delete task mutation\n  const deleteTaskMutation = useMutation({\n    mutationFn: (taskId) => apiClient.deleteTask(taskId),\n    onSuccess: () => {\n      queryClient.invalidateQueries(['tasks']);\n      showNotification('Task deleted successfully', 'success');\n      navigate('/dashboard');\n    },\n    onError: (error) => {\n      showNotification(error.userMessage || 'Failed to delete task', 'error');\n    },\n  });\n\n  // Restart decomposition mutation\n  const restartDecompositionMutation = useMutation({\n    mutationFn: ({ taskId, restartData }) => apiClient.restartDecomposition(taskId, restartData),\n    onSuccess: () => {\n      queryClient.invalidateQueries(['task', taskId]);\n      queryClient.invalidateQueries(['taskTree', taskId]);\n      queryClient.invalidateQueries(['tasks']);\n      setShowRestartModal(false);\n      setIsDecomposing(true);  // Start showing decomposition status\n      showNotification('Decomposition restarted successfully!', 'success');\n    },\n    onError: (error) => {\n      showNotification(error.userMessage || 'Failed to restart decomposition', 'error');\n    },\n  });\n\n  // Subscribe to WebSocket updates\n  useEffect(() => {\n    if (taskId && connected) {\n      console.log('TaskBoard WebSocket setup:', { taskId, connected });\n      \n      const handleWebSocketEvent = (event) => {\n        console.log('TaskBoard received WebSocket event:', event);\n        \n        // Handle events for this specific task or its subtasks \n        // Check if event is for this task directly OR if this task is the root of the event's hierarchy\n        const isForThisTask = event.task_id === taskId;\n        const isForSubtask = event.root_task_id === taskId;\n        \n        if (isForThisTask || isForSubtask) {\n          console.log('Processing event for task:', taskId, event.type);\n          \n          if (event.type === 'task.updated' || event.type === 'task.created' || event.type === 'task.status_changed' || event.type === 'task.completed') {\n            queryClient.invalidateQueries(['task', taskId]);\n            queryClient.invalidateQueries(['taskTree', taskId]);\n            \n            // Show different notifications based on event type\n            if (event.type === 'task.completed') {\n              showNotification('Task completed!', 'success');\n            } else if (event.type === 'task.status_changed') {\n              const status = event.status || event.data?.status;\n              if (status === 'completed') {\n                showNotification('Task status updated to completed!', 'success');\n              } else {\n                showNotification(`Task status updated to ${status}!`, 'info');\n              }\n            } else {\n              showNotification(`Task ${event.type.split('.')[1]}!`, 'info');\n            }\n          }\n          \n          // Handle decomposition events\n          if (event.type === 'decomposition.started') {\n            setIsDecomposing(true);\n            showNotification('Decomposition started!', 'info');\n          } else if (event.type === 'decomposition.completed' || event.type === 'decomposition.error') {\n            setIsDecomposing(false);\n          }\n          \n          // Detect decomposition start from task creation events\n          if (event.type === 'task.created' && event.parent_id === taskId) {\n            console.log('Detected decomposition start from task creation');\n            setIsDecomposing(true);\n            showNotification('Subtask created! Decomposition in progress...', 'success');\n          }\n        } else {\n          console.log('Ignoring event - not for our task:', { \n            eventTaskId: event.task_id, \n            eventParentId: event.parent_id,\n            eventRootTaskId: event.root_task_id,\n            ourTaskId: taskId,\n            isForThisTask,\n            isForSubtask\n          });\n        }\n      };\n\n      const unsubscribe = subscribe(handleWebSocketEvent);\n      return unsubscribe;\n    } else if (taskId && !connected) {\n      console.log('WebSocket not connected, cannot subscribe to events');\n    }\n  }, [taskId, connected]); // Minimal dependencies\n\n  // Handle loading states\n  const isLoading = taskLoading || treeLoading;\n  const error = taskError || treeError;\n\n  // Calculate task statistics\n  const taskStats = React.useMemo(() => {\n    if (!taskTree) return { total: 0, completed: 0, pending: 0, inProgress: 0, awaitingApproval: 0 };\n\n    const calculateStats = (node, stats = { total: 0, completed: 0, pending: 0, inProgress: 0, awaitingApproval: 0 }) => {\n      stats.total++;\n      switch (node.status) {\n        case 'completed':\n          stats.completed++;\n          break;\n        case 'in_progress':\n        case 'processing':\n          stats.inProgress++;\n          break;\n        case 'awaiting_approval':\n          stats.awaitingApproval++;\n          break;\n        default:\n          stats.pending++;\n      }\n\n      if (node.children) {\n        node.children.forEach(child => calculateStats(child, stats));\n      }\n\n      return stats;\n    };\n\n    return calculateStats(taskTree);\n  }, [taskTree]);\n\n\n  const handleStatusChange = (taskId, newStatus) => {\n    updateTaskMutation.mutate({ taskId, status: newStatus });\n  };\n\n  const handleDeleteTask = () => {\n    setGlobalLoading(true);\n    deleteTaskMutation.mutate(taskId, {\n      onSettled: () => setGlobalLoading(false),\n    });\n  };\n\n  const handleDecompositionComplete = () => {\n    // Refresh the task tree when decomposition completes\n    queryClient.invalidateQueries(['task', taskId]);\n    queryClient.invalidateQueries(['taskTree', taskId]);\n    showNotification('Task decomposition completed successfully!', 'success');\n  };\n\n  // Loading state\n  if (isLoading) {\n    return (\n      <div style={{\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        minHeight: '400px',\n        flexDirection: 'column',\n        gap: tokens.spacing[4],\n      }}>\n        <LoadingSpinner size=\"lg\" />\n        <Text style={{ color: 'var(--color-text-muted)' }}>\n          Loading task details...\n        </Text>\n      </div>\n    );\n  }\n\n  // Error state\n  if (error) {\n    return (\n      <div className=\"container\" style={{ paddingTop: tokens.spacing[8] }}>\n        <ErrorMessage\n          title=\"Failed to Load Task\"\n          message={error.userMessage || 'Unable to load task details'}\n          onRetry={() => {\n            refetchTask();\n            refetchTree();\n          }}\n        />\n      </div>\n    );\n  }\n\n  // Not found state\n  if (!task) {\n    return (\n      <div className=\"container\" style={{ paddingTop: tokens.spacing[8] }}>\n        <EmptyState\n          icon={DocumentDuplicateIcon}\n          title=\"Task Not Found\"\n          description=\"The requested task could not be found or you don't have access to it.\"\n          action={\n            <Button onClick={() => navigate('/dashboard')} icon={BackIcon}>\n              Back to Dashboard\n            </Button>\n          }\n        />\n      </div>\n    );\n  }\n\n  const completionRate = taskStats.total > 0 \n    ? Math.round((taskStats.completed / taskStats.total) * 100) \n    : 0;\n\n  // Debug logging for completion rate\n  console.log('TaskBoard completion rate:', {\n    completionRate,\n    taskStats,\n    isFullyComplete: completionRate === 100\n  });\n\n  // Initialize edit form with current task data\n  const initializeEditForm = () => {\n    setEditFormData({\n      description: task?.description || '',\n      application_type: techStack?.application_type || '',\n      tech_stack_id: techStack?.tech_stack_id || '',\n      max_depth: 3,\n      max_subtasks: 10,\n      complexity_threshold: 0.7,\n      requires_approval: false,\n      preserve_root_context: true,\n      tech_preferences: {\n        additional_requirements: techStack?.additional_requirements || ''\n      }\n    });\n  };\n\n  // Handle edit form submission\n  const handleEditSubmit = () => {\n    const restartData = {\n      ...editFormData,\n      tech_preferences: {\n        ...editFormData.tech_preferences,\n        application_type: editFormData.application_type,\n        tech_stack_id: editFormData.tech_stack_id,\n      }\n    };\n    \n    restartDecompositionMutation.mutate({ taskId, restartData });\n    setEditMode(false);\n  };\n\n  return (\n    <div className=\"container\" style={{ paddingTop: tokens.spacing[6] }}>\n      {/* Header */}\n      <div style={{\n        display: 'flex',\n        alignItems: 'flex-start',\n        justifyContent: 'space-between',\n        marginBottom: tokens.spacing[8],\n        gap: tokens.spacing[6],\n      }}>\n        <div style={{ flex: 1 }}>\n          <div style={{\n            display: 'flex',\n            alignItems: 'center',\n            gap: tokens.spacing[4],\n            marginBottom: tokens.spacing[3],\n          }}>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              icon={BackIcon}\n              onClick={() => navigate('/dashboard')}\n            >\n              Dashboard\n            </Button>\n            <ConnectionStatus connected={connected} />\n          </div>\n\n          {editMode ? (\n            <div style={{ marginBottom: tokens.spacing[4] }}>\n              <Label htmlFor=\"description\">Task Description</Label>\n              <textarea\n                id=\"description\"\n                value={editFormData.description}\n                onChange={(e) => setEditFormData({ ...editFormData, description: e.target.value })}\n                placeholder=\"Describe what you want to build...\"\n                rows={3}\n                style={{\n                  width: '100%',\n                  padding: tokens.spacing[2],\n                  borderRadius: tokens.borderRadius.md,\n                  border: '1px solid var(--color-border)',\n                  backgroundColor: 'var(--color-surface)',\n                  color: 'var(--color-text)',\n                  fontSize: tokens.typography.fontSize.sm[0],\n                  resize: 'vertical',\n                  outline: 'none',\n                  boxSizing: 'border-box',\n                  fontFamily: 'inherit',\n                  marginBottom: tokens.spacing[3],\n                }}\n              />\n            </div>\n          ) : (\n            <span style={{\n              fontSize: tokens.typography.fontSize['3xl'][0],\n              lineHeight: tokens.typography.lineHeight.tight,\n              fontWeight: tokens.typography.fontWeight.bold,\n              marginBottom: tokens.spacing[2],\n              color: tokens.colors.primary[500],\n              display: 'block',\n            }}>\n              {task.description}\n            </span>\n          )}\n\n          {editMode ? (\n            <EditForm \n              formData={editFormData}\n              setFormData={setEditFormData}\n              onSubmit={handleEditSubmit}\n              onCancel={() => setEditMode(false)}\n              isLoading={restartDecompositionMutation.isPending}\n            />\n          ) : (\n            <TaskMetadata task={task} />\n          )}\n        </div>\n\n        {/* Actions */}\n        <div style={{\n          display: 'flex',\n          alignItems: 'center',\n          gap: tokens.spacing[2],\n        }}>\n          {!editMode && (\n            <>\n              <ExportModal \n                task={task}\n                localTaskTree={taskTree}\n                onShowToast={showNotification}\n              />\n              \n              {task.status !== 'completed' && (\n                <Button\n                  variant=\"success\"\n                  size=\"sm\"\n                  icon={CheckIcon}\n                  onClick={() => handleStatusChange(task.task_id, 'completed')}\n                  loading={updateTaskMutation.isPending}\n                  title=\"Mark this task as completed\"\n                >\n                  Mark Complete\n                </Button>\n              )}\n\n              <IconButton\n                icon={TrashIcon}\n                variant=\"danger\"\n                size=\"sm\"\n                onClick={() => setShowDeleteModal(true)}\n                title=\"Delete task\"\n              />\n            </>\n          )}\n\n          {/* Edit Mode Toggle for root tasks */}\n          {!task.parent_id && (\n            <Button\n              variant={editMode ? \"outline\" : \"outline\"}\n              size=\"sm\"\n              icon={EditIcon}\n              onClick={() => {\n                if (editMode) {\n                  setEditMode(false);\n                } else {\n                  setEditMode(true);\n                  initializeEditForm();\n                }\n              }}\n              title={editMode ? \"Exit edit mode\" : \"Edit task\"}\n            >\n              {editMode ? \"Cancel Edit\" : \"Edit\"}\n            </Button>\n          )}\n        </div>\n      </div>\n\n      {/* Compact Statistics */}\n      <CompactStats \n        taskStats={taskStats} \n        completionRate={completionRate}\n      />\n\n      {/* Decomposition Status */}\n      <DecompositionStatus\n        taskId={taskId}\n        isDecomposing={isDecomposing}\n        onDecompositionComplete={handleDecompositionComplete}\n      />\n\n\n      {/* Pending Approvals Panel - Component handles its own visibility */}\n      <PendingApprovalsPanel parentTaskId={taskId} />\n\n      {/* Combined Overview & Tree View */}\n      <div style={{\n        display: 'grid',\n        gridTemplateColumns: '2fr 1fr',\n        gap: tokens.spacing[6],\n        marginBottom: tokens.spacing[6],\n        width: '100%',\n        overflow: 'hidden',\n      }}\n      className=\"task-board-layout\">\n        {/* Main Tree Visualization */}\n        <div style={{\n          minWidth: 0,\n          overflow: 'hidden',\n        }}>\n          <TreeVisualization \n            taskTree={taskTree} \n            onStatusChange={handleStatusChange}\n            updating={updateTaskMutation.isPending}\n            onTaskSelect={setSelectedTask}\n            onRefreshTree={refetchTree}\n          />\n        </div>\n\n        {/* Task Overview Sidebar */}\n        <div style={{\n          display: 'flex',\n          flexDirection: 'column',\n          gap: tokens.spacing[6],\n          minWidth: 0,\n        }}>\n          {/* Task Description Card */}\n          <Card title={selectedTask ? \"Selected Task Details\" : \"Task Details\"}>\n            {selectedTask && (\n              <div style={{\n                marginBottom: tokens.spacing[3],\n                padding: tokens.spacing[2],\n                backgroundColor: 'var(--color-surface)',\n                borderRadius: tokens.borderRadius.sm,\n                fontSize: tokens.typography.fontSize.xs[0],\n                color: 'var(--color-text-muted)',\n              }}>\n                <strong>Task ID:</strong> {selectedTask.task_id?.substring(0, 8)}... | \n                <strong> Status:</strong> {selectedTask.status?.replace('_', ' ')} |\n                <strong> Atomic:</strong> {selectedTask.is_atomic ? 'Yes' : 'No'}\n              </div>\n            )}\n            \n            {/* Tech Stack Display */}\n            <TechStackDisplay task={selectedTask || task} />\n            <Text style={{\n              marginBottom: tokens.spacing[4],\n              lineHeight: tokens.typography.lineHeight.relaxed,\n            }}>\n              {(selectedTask || task).description}\n            </Text>\n            \n            {(selectedTask || task).implementation_details && (\n              <>\n                <Text style={{\n                  fontWeight: tokens.typography.fontWeight.semibold,\n                  marginBottom: tokens.spacing[2],\n                  fontSize: tokens.typography.fontSize.sm[0],\n                  color: 'var(--color-text-muted)',\n                  textTransform: 'uppercase',\n                  letterSpacing: tokens.typography.letterSpacing.wide,\n                }}>\n                  Implementation Details\n                  {(selectedTask || task).is_atomic && (\n                    <Badge variant=\"success\" size=\"sm\" style={{ marginLeft: tokens.spacing[2] }}>\n                      Atomic Task\n                    </Badge>\n                  )}\n                </Text>\n                <div style={{ \n                  color: 'var(--color-text)',\n                  fontSize: tokens.typography.fontSize.sm[0],\n                  lineHeight: tokens.typography.lineHeight.normal,\n                  backgroundColor: 'var(--color-surface)',\n                  border: '1px solid var(--color-border)',\n                  borderRadius: tokens.borderRadius.md,\n                  padding: tokens.spacing[3],\n                  whiteSpace: 'pre-wrap',\n                  fontFamily: tokens.typography.fontFamily.mono,\n                  maxHeight: '300px',\n                  minHeight: '100px',\n                  overflowY: 'scroll',\n                  overflowX: 'hidden',\n                  wordWrap: 'break-word',\n                  wordBreak: 'break-word',\n                }}>\n                  {(selectedTask || task).implementation_details}\n                </div>\n              </>\n            )}\n\n            {(selectedTask || task).additional_context && (\n              <>\n                <Text style={{\n                  fontWeight: tokens.typography.fontWeight.semibold,\n                  marginBottom: tokens.spacing[2],\n                  fontSize: tokens.typography.fontSize.sm[0],\n                  color: 'var(--color-text-muted)',\n                  textTransform: 'uppercase',\n                  letterSpacing: tokens.typography.letterSpacing.wide,\n                  marginTop: tokens.spacing[4],\n                }}>\n                  Additional Context\n                </Text>\n                <Text style={{ \n                  color: 'var(--color-text-muted)',\n                  fontSize: tokens.typography.fontSize.sm[0],\n                  lineHeight: tokens.typography.lineHeight.relaxed,\n                }}>\n                  {(selectedTask || task).additional_context}\n                </Text>\n              </>\n            )}\n          </Card>\n\n          {/* Progress Summary Card */}\n          <Card title=\"Progress Summary\">\n            <div style={{ display: 'flex', flexDirection: 'column', gap: tokens.spacing[4] }}>\n              <div>\n                <Text style={{\n                  fontSize: tokens.typography.fontSize.sm[0],\n                  color: 'var(--color-text-muted)',\n                  margin: 0,\n                  marginBottom: tokens.spacing[2],\n                }}>\n                  Overall Progress ({completionRate}%)\n                </Text>\n                <Progress \n                  value={completionRate}\n                  variant={completionRate === 100 ? 'success' : 'primary'}\n                />\n              </div>\n              \n              <div style={{\n                display: 'flex',\n                justifyContent: 'space-between',\n                fontSize: tokens.typography.fontSize.sm[0],\n              }}>\n                <span style={{ color: 'var(--color-text-muted)' }}>Pending:</span>\n                <span style={{ color: tokens.colors.warning[500] }}>{taskStats.pending}</span>\n              </div>\n              \n              <div style={{\n                display: 'flex',\n                justifyContent: 'space-between',\n                fontSize: tokens.typography.fontSize.sm[0],\n              }}>\n                <span style={{ color: 'var(--color-text-muted)' }}>In Progress:</span>\n                <span style={{ color: tokens.colors.info[500] }}>{taskStats.inProgress}</span>\n              </div>\n              \n              {taskStats.awaitingApproval > 0 && (\n                <div style={{\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  fontSize: tokens.typography.fontSize.sm[0],\n                }}>\n                  <span style={{ color: 'var(--color-text-muted)' }}>Awaiting Approval:</span>\n                  <span style={{ color: tokens.colors.error[500] }}>{taskStats.awaitingApproval}</span>\n                </div>\n              )}\n              \n              <div style={{\n                display: 'flex',\n                justifyContent: 'space-between',\n                fontSize: tokens.typography.fontSize.sm[0],\n              }}>\n                <span style={{ color: 'var(--color-text-muted)' }}>Completed:</span>\n                <span style={{ color: tokens.colors.success[500] }}>{taskStats.completed}</span>\n              </div>\n            </div>\n          </Card>\n        </div>\n      </div>\n\n      {/* Delete Confirmation Modal */}\n      <Modal\n        isOpen={showDeleteModal}\n        onClose={() => setShowDeleteModal(false)}\n        title=\"Delete Task\"\n      >\n        <Text style={{ marginBottom: tokens.spacing[6] }}>\n          Are you sure you want to delete this task? This action cannot be undone.\n          All subtasks will also be permanently deleted.\n        </Text>\n        <div style={{\n          display: 'flex',\n          justifyContent: 'flex-end',\n          gap: tokens.spacing[3],\n        }}>\n          <Button\n            variant=\"secondary\"\n            onClick={() => setShowDeleteModal(false)}\n          >\n            Cancel\n          </Button>\n          <Button\n            variant=\"danger\"\n            onClick={handleDeleteTask}\n            loading={deleteTaskMutation.isPending}\n          >\n            Delete Task\n          </Button>\n        </div>\n      </Modal>\n\n      {/* Restart Decomposition Modal */}\n      <RestartDecompositionModal\n        isOpen={showRestartModal}\n        onClose={() => setShowRestartModal(false)}\n        task={task}\n        onRestart={(restartData) => restartDecompositionMutation.mutate({ taskId, restartData })}\n        isLoading={restartDecompositionMutation.isPending}\n      />\n\n    </div>\n  );\n};\n\n// Connection Status Component\nconst ConnectionStatus = ({ connected }) => (\n  <div style={{\n    display: 'flex',\n    alignItems: 'center',\n    gap: tokens.spacing[2],\n  }}>\n    <div style={{\n      width: '8px',\n      height: '8px',\n      borderRadius: tokens.borderRadius.full,\n      backgroundColor: connected ? tokens.colors.success[500] : tokens.colors.error[500],\n    }} />\n    <Text style={{\n      fontSize: tokens.typography.fontSize.xs[0],\n      color: 'var(--color-text-muted)',\n      margin: 0,\n    }}>\n      {connected ? 'Live' : 'Offline'}\n    </Text>\n  </div>\n);\n\n// Task Metadata Component\nconst TaskMetadata = ({ task }) => (\n  <div style={{\n    display: 'flex',\n    flexWrap: 'wrap',\n    gap: tokens.spacing[4],\n    alignItems: 'center',\n  }}>\n    <Badge variant={getStatusVariant(task.status)}>\n      {task.status.replace('_', ' ')}\n    </Badge>\n    \n    {task.created_at && (\n      <Text style={{\n        fontSize: tokens.typography.fontSize.sm[0],\n        color: 'var(--color-text-muted)',\n        margin: 0,\n      }}>\n        Created {formatDetailedDate(task.created_at)}\n      </Text>\n    )}\n    \n    {task.children_count !== undefined && (\n      <Text style={{\n        fontSize: tokens.typography.fontSize.sm[0],\n        color: 'var(--color-text-muted)',\n        margin: 0,\n      }}>\n        {task.children_count} subtasks\n      </Text>\n    )}\n  </div>\n);\n\n// Compact Statistics Component\nconst CompactStats = ({ taskStats, completionRate }) => (\n  <Card>\n    <div \n      style={{\n        display: 'grid',\n        gridTemplateColumns: 'repeat(auto-fit, minmax(100px, 1fr))',\n        gap: tokens.spacing[3],\n        padding: tokens.spacing[3],\n        marginBottom: tokens.spacing[4],\n      }}\n      className=\"compact-stats\"\n    >\n      {/* Total Tasks */}\n      <div style={{ textAlign: 'center' }}>\n        <Text style={{\n          fontSize: tokens.typography.fontSize.lg[0],\n          fontWeight: tokens.typography.fontWeight.bold,\n          color: tokens.colors.primary[500],\n          margin: 0,\n        }}>\n          {taskStats.total}\n        </Text>\n        <Text style={{\n          fontSize: tokens.typography.fontSize.xs[0],\n          color: 'var(--color-text-muted)',\n          margin: 0,\n        }}>\n          Total\n        </Text>\n      </div>\n\n      {/* Completed */}\n      <div style={{ textAlign: 'center' }}>\n        <Text style={{\n          fontSize: tokens.typography.fontSize.lg[0],\n          fontWeight: tokens.typography.fontWeight.bold,\n          color: tokens.colors.success[500],\n          margin: 0,\n        }}>\n          {taskStats.completed}\n        </Text>\n        <Text style={{\n          fontSize: tokens.typography.fontSize.xs[0],\n          color: 'var(--color-text-muted)',\n          margin: 0,\n        }}>\n          Done\n        </Text>\n      </div>\n\n      {/* In Progress */}\n      <div style={{ textAlign: 'center' }}>\n        <Text style={{\n          fontSize: tokens.typography.fontSize.lg[0],\n          fontWeight: tokens.typography.fontWeight.bold,\n          color: tokens.colors.warning[500],\n          margin: 0,\n        }}>\n          {taskStats.inProgress}\n        </Text>\n        <Text style={{\n          fontSize: tokens.typography.fontSize.xs[0],\n          color: 'var(--color-text-muted)',\n          margin: 0,\n        }}>\n          Active\n        </Text>\n      </div>\n\n      {/* Pending */}\n      <div style={{ textAlign: 'center' }}>\n        <Text style={{\n          fontSize: tokens.typography.fontSize.lg[0],\n          fontWeight: tokens.typography.fontWeight.bold,\n          color: tokens.colors.info[500],\n          margin: 0,\n        }}>\n          {taskStats.pending}\n        </Text>\n        <Text style={{\n          fontSize: tokens.typography.fontSize.xs[0],\n          color: 'var(--color-text-muted)',\n          margin: 0,\n        }}>\n          Pending\n        </Text>\n      </div>\n\n      {/* Awaiting Approval - Show only if there are tasks awaiting approval */}\n      {taskStats.awaitingApproval > 0 && (\n        <div style={{ textAlign: 'center' }}>\n          <Text style={{\n            fontSize: tokens.typography.fontSize.lg[0],\n            fontWeight: tokens.typography.fontWeight.bold,\n            color: tokens.colors.error[500],\n            margin: 0,\n          }}>\n            {taskStats.awaitingApproval}\n          </Text>\n          <Text style={{\n            fontSize: tokens.typography.fontSize.xs[0],\n            color: 'var(--color-text-muted)',\n            margin: 0,\n          }}>\n            Approval\n          </Text>\n        </div>\n      )}\n\n      {/* Progress Percentage */}\n      <div style={{ textAlign: 'center' }}>\n        <Text style={{\n          fontSize: tokens.typography.fontSize.lg[0],\n          fontWeight: tokens.typography.fontWeight.bold,\n          color: completionRate === 100 ? tokens.colors.success[500] : tokens.colors.primary[400],\n          margin: 0,\n        }}>\n          {completionRate}%\n        </Text>\n        <Text style={{\n          fontSize: tokens.typography.fontSize.xs[0],\n          color: 'var(--color-text-muted)',\n          margin: 0,\n        }}>\n          Complete\n        </Text>\n      </div>\n\n      {/* Progress Bar - Spans full width */}\n      <div style={{\n        gridColumn: '1 / -1',\n        marginTop: tokens.spacing[1],\n      }}>\n        <Progress\n          value={completionRate}\n          variant={completionRate === 100 ? 'success' : 'primary'}\n          style={{ height: '3px' }}\n        />\n      </div>\n    </div>\n  </Card>\n);\n\n\n// Tech Stack Display Component\nconst TechStackDisplay = ({ task }) => {\n  const { techStack, projectStandards } = useTaskData(task, true);\n  \n  // Only show for root tasks that have tech stack data\n  if (!task || task.depth > 0 || (!techStack || Object.keys(techStack).length === 0)) {\n    return null;\n  }\n  \n  // Helper function to render tech stack section\n  const renderTechStackItem = (label, value) => {\n    if (!value) return null;\n    \n    // If value is an object, extract meaningful properties\n    if (typeof value === 'object' && !Array.isArray(value)) {\n      const parts = [];\n      \n      // Handle frontend object\n      if (label === 'Frontend' && value.framework) {\n        parts.push(value.framework);\n        if (value.libraries && Array.isArray(value.libraries) && value.libraries.length > 0) {\n          parts.push(`Libraries: ${value.libraries.join(', ')}`);\n        }\n        if (value.styling) {\n          parts.push(`Styling: ${value.styling}`);\n        }\n        return parts.length > 0 ? parts.join(' | ') : 'Not specified';\n      }\n      \n      // Handle backend object\n      if (label === 'Backend') {\n        if (value.language) parts.push(value.language);\n        if (value.framework) parts.push(value.framework);\n        if (value.api) parts.push(`API: ${value.api}`);\n        return parts.length > 0 ? parts.join(' | ') : 'Not specified';\n      }\n      \n      // Handle database object\n      if (label === 'Database') {\n        if (typeof value === 'string') return value;\n        if (value.type) return value.type;\n        if (value.database) return value.database;\n      }\n      \n      // Handle devops object\n      if (label === 'DevOps') {\n        if (value.containerization) parts.push(`Containerization: ${value.containerization}`);\n        if (value.ci_cd) parts.push(`CI/CD: ${value.ci_cd}`);\n        if (value.hosting) parts.push(`Hosting: ${value.hosting}`);\n        if (value.orchestration) parts.push(`Orchestration: ${value.orchestration}`);\n        return parts.length > 0 ? parts.join(' | ') : null;\n      }\n      \n      // Default: try to extract meaningful values from object\n      const meaningfulValues = Object.values(value).filter(v => \n        v && typeof v === 'string'\n      );\n      return meaningfulValues.length > 0 ? meaningfulValues.join(' | ') : null;\n    }\n    \n    // If value is array, join it\n    if (Array.isArray(value)) {\n      return value.join(', ');\n    }\n    \n    // If value is string, return as is\n    return String(value);\n  };\n  \n  return (\n    <div style={{ marginBottom: tokens.spacing[4] }}>\n      <Text style={{\n        fontWeight: tokens.typography.fontWeight.semibold,\n        marginBottom: tokens.spacing[2],\n        fontSize: tokens.typography.fontSize.sm[0],\n        color: 'var(--color-text-muted)',\n        textTransform: 'uppercase',\n        letterSpacing: tokens.typography.letterSpacing.wide,\n      }}>\n        Tech Stack\n      </Text>\n      <div style={{\n        backgroundColor: 'var(--color-surface)',\n        border: '1px solid var(--color-border)',\n        borderRadius: tokens.borderRadius.md,\n        padding: tokens.spacing[3],\n        fontSize: tokens.typography.fontSize.sm[0],\n      }}>\n        {techStack.frontend && (\n          <div style={{ marginBottom: tokens.spacing[2] }}>\n            <strong>Frontend:</strong> {renderTechStackItem('Frontend', techStack.frontend)}\n          </div>\n        )}\n        {techStack.backend && (\n          <div style={{ marginBottom: tokens.spacing[2] }}>\n            <strong>Backend:</strong> {renderTechStackItem('Backend', techStack.backend)}\n          </div>\n        )}\n        {(techStack.backend?.database || techStack.database) && (\n          <div style={{ marginBottom: tokens.spacing[2] }}>\n            <strong>Database:</strong> {renderTechStackItem('Database', techStack.backend?.database || techStack.database)}\n          </div>\n        )}\n        {techStack.devops && (\n          <div style={{ marginBottom: tokens.spacing[2] }}>\n            <strong>DevOps:</strong> {renderTechStackItem('DevOps', techStack.devops)}\n          </div>\n        )}\n        {techStack.testing && (\n          <div style={{ marginBottom: tokens.spacing[2] }}>\n            <strong>Testing:</strong> {renderTechStackItem('Testing', techStack.testing)}\n          </div>\n        )}\n        {techStack.additional_tools && Array.isArray(techStack.additional_tools) && techStack.additional_tools.length > 0 && (\n          <div style={{ marginBottom: tokens.spacing[2] }}>\n            <strong>Additional Tools:</strong> {techStack.additional_tools.join(', ')}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\n// EditForm Component - Inline editing form for task parameters\nconst EditForm = ({ formData, setFormData, onSubmit, onCancel, isLoading }) => {\n  const applicationTypes = getApplicationTypes();\n  const techStacks = getTechStacksForType(formData.application_type);\n  \n  return (\n    <div style={{\n      backgroundColor: 'var(--color-surface)',\n      border: '1px solid var(--color-border)',\n      borderRadius: tokens.borderRadius.lg,\n      padding: tokens.spacing[4],\n      marginBottom: tokens.spacing[4],\n    }}>\n      <Text style={{\n        fontSize: tokens.typography.fontSize.lg[0],\n        fontWeight: tokens.typography.fontWeight.semibold,\n        marginBottom: tokens.spacing[4],\n        color: 'var(--color-primary-500)',\n      }}>\n        Edit Task Parameters\n      </Text>\n      \n      {/* Application Type Selection */}\n      <div style={{ marginBottom: tokens.spacing[3] }}>\n        <Label htmlFor=\"application_type\">Application Type</Label>\n        <select\n          id=\"application_type\"\n          value={formData.application_type}\n          onChange={(e) => {\n            setFormData({ \n              ...formData, \n              application_type: e.target.value,\n              tech_stack_id: '' // Reset tech stack when app type changes\n            });\n          }}\n          style={{\n            width: '100%',\n            padding: tokens.spacing[2],\n            borderRadius: tokens.borderRadius.md,\n            border: '1px solid var(--color-border)',\n            backgroundColor: 'var(--color-surface)',\n            color: 'var(--color-text)',\n            fontSize: tokens.typography.fontSize.sm[0],\n          }}\n        >\n          <option value=\"\">Select Application Type</option>\n          {applicationTypes.map(type => (\n            <option key={type.id} value={type.id}>{type.label}</option>\n          ))}\n        </select>\n      </div>\n\n      {/* Tech Stack Selection */}\n      {formData.application_type && (\n        <div style={{ marginBottom: tokens.spacing[3] }}>\n          <Label htmlFor=\"tech_stack_id\">Tech Stack</Label>\n          <select\n            id=\"tech_stack_id\"\n            value={formData.tech_stack_id}\n            onChange={(e) => setFormData({ ...formData, tech_stack_id: e.target.value })}\n            style={{\n              width: '100%',\n              padding: tokens.spacing[2],\n              borderRadius: tokens.borderRadius.md,\n              border: '1px solid var(--color-border)',\n              backgroundColor: 'var(--color-surface)',\n              color: 'var(--color-text)',\n              fontSize: tokens.typography.fontSize.sm[0],\n            }}\n          >\n            <option value=\"\">Select Tech Stack</option>\n            {techStacks.map(stack => (\n              <option key={stack.id} value={stack.id}>{stack.name}</option>\n            ))}\n          </select>\n        </div>\n      )}\n\n      {/* Additional Requirements */}\n      <div style={{ marginBottom: tokens.spacing[3] }}>\n        <Label htmlFor=\"additional_requirements\">Additional Requirements</Label>\n        <textarea\n          id=\"additional_requirements\"\n          value={formData.tech_preferences?.additional_requirements || ''}\n          onChange={(e) => setFormData({ \n            ...formData, \n            tech_preferences: {\n              ...formData.tech_preferences,\n              additional_requirements: e.target.value\n            }\n          })}\n          placeholder=\"Any specific requirements or constraints...\"\n          rows={2}\n          style={{\n            width: '100%',\n            padding: tokens.spacing[2],\n            borderRadius: tokens.borderRadius.md,\n            border: '1px solid var(--color-border)',\n            backgroundColor: 'var(--color-surface)',\n            color: 'var(--color-text)',\n            fontSize: tokens.typography.fontSize.sm[0],\n            resize: 'vertical',\n            fontFamily: 'inherit',\n          }}\n        />\n      </div>\n\n      {/* AI Parameters */}\n      <div style={{\n        display: 'grid',\n        gridTemplateColumns: '1fr 1fr 1fr',\n        gap: tokens.spacing[3],\n        marginBottom: tokens.spacing[4],\n      }}>\n        <div>\n          <Label htmlFor=\"max_depth\">Max Depth</Label>\n          <input\n            id=\"max_depth\"\n            type=\"number\"\n            min=\"1\"\n            max=\"5\"\n            value={formData.max_depth}\n            onChange={(e) => setFormData({ ...formData, max_depth: parseInt(e.target.value) })}\n            style={{\n              width: '100%',\n              padding: tokens.spacing[2],\n              borderRadius: tokens.borderRadius.md,\n              border: '1px solid var(--color-border)',\n              backgroundColor: 'var(--color-surface)',\n              color: 'var(--color-text)',\n              fontSize: tokens.typography.fontSize.sm[0],\n            }}\n          />\n        </div>\n        <div>\n          <Label htmlFor=\"max_subtasks\">Max Subtasks</Label>\n          <input\n            id=\"max_subtasks\"\n            type=\"number\"\n            min=\"2\"\n            max=\"15\"\n            value={formData.max_subtasks}\n            onChange={(e) => setFormData({ ...formData, max_subtasks: parseInt(e.target.value) })}\n            style={{\n              width: '100%',\n              padding: tokens.spacing[2],\n              borderRadius: tokens.borderRadius.md,\n              border: '1px solid var(--color-border)',\n              backgroundColor: 'var(--color-surface)',\n              color: 'var(--color-text)',\n              fontSize: tokens.typography.fontSize.sm[0],\n            }}\n          />\n        </div>\n        <div>\n          <Label htmlFor=\"complexity_threshold\">Complexity Threshold</Label>\n          <input\n            id=\"complexity_threshold\"\n            type=\"number\"\n            min=\"0.1\"\n            max=\"1.0\"\n            step=\"0.1\"\n            value={formData.complexity_threshold}\n            onChange={(e) => setFormData({ ...formData, complexity_threshold: parseFloat(e.target.value) })}\n            style={{\n              width: '100%',\n              padding: tokens.spacing[2],\n              borderRadius: tokens.borderRadius.md,\n              border: '1px solid var(--color-border)',\n              backgroundColor: 'var(--color-surface)',\n              color: 'var(--color-text)',\n              fontSize: tokens.typography.fontSize.sm[0],\n            }}\n          />\n        </div>\n      </div>\n\n      {/* Action Buttons */}\n      <div style={{\n        display: 'flex',\n        gap: tokens.spacing[2],\n        justifyContent: 'flex-end',\n      }}>\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          onClick={onCancel}\n          disabled={isLoading}\n          icon={TrashIcon}\n        >\n          Cancel\n        </Button>\n        <Button\n          variant=\"primary\"\n          size=\"sm\"\n          onClick={onSubmit}\n          disabled={isLoading || !formData.description.trim()}\n          icon={CheckIcon}\n          loading={isLoading}\n        >\n          Save & Restart Decomposition\n        </Button>\n      </div>\n    </div>\n  );\n};\n\n// RestartDecompositionModal Component\nconst RestartDecompositionModal = ({ isOpen, onClose, task, onRestart, isLoading }) => {\n  // Get task data at component level (React Hooks rule compliance)\n  const { techStack } = useTaskData(task, true);\n  \n  const [formData, setFormData] = useState({\n    description: '',\n    application_type: '',\n    tech_stack_id: '',\n    max_depth: 3,\n    max_subtasks: 10,\n    complexity_threshold: 0.7,\n    requires_approval: false,\n    preserve_root_context: true,\n    tech_preferences: {\n      additional_requirements: ''\n    }\n  });\n\n  // Initialize form data when modal opens\n  useEffect(() => {\n    if (isOpen && task) {\n      // Use the techStack from the hook called at component level\n      \n      setFormData({\n        description: task.description || '',\n        application_type: '',\n        tech_stack_id: '',\n        max_depth: 3,\n        max_subtasks: 10,\n        complexity_threshold: 0.7,\n        requires_approval: false,\n        preserve_root_context: true,\n        tech_preferences: {\n          additional_requirements: ''\n        }\n      });\n    }\n  }, [isOpen, task]);\n\n  const handleSubmit = () => {\n    const restartData = {\n      ...formData,\n      tech_preferences: {\n        ...formData.tech_preferences,\n        application_type: formData.application_type,\n        tech_stack_id: formData.tech_stack_id,\n      }\n    };\n    \n    // Remove top-level application_type and tech_stack_id since they're now in tech_preferences\n    delete restartData.application_type;\n    delete restartData.tech_stack_id;\n    \n    onRestart(restartData);\n  };\n\n  const applicationTypes = getApplicationTypes();\n  const availableTechStacks = formData.application_type ? getTechStacksForType(formData.application_type) : [];\n  const selectedTechStack = formData.application_type && formData.tech_stack_id \n    ? getTechStackById(formData.application_type, formData.tech_stack_id) \n    : null;\n\n  if (!isOpen) return null;\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      title=\"Restart Decomposition\"\n      size=\"lg\"\n    >\n      <div style={{ marginBottom: tokens.spacing[4] }}>\n        <Text style={{ color: 'var(--color-text-muted)' }}>\n          This will delete all existing subtasks and restart the decomposition process with new parameters.\n          You can update the task description, tech stack preferences, and AI parameters.\n        </Text>\n      </div>\n\n      {/* Task Description */}\n      <div style={{ marginBottom: tokens.spacing[4] }}>\n        <label style={{\n          display: 'block',\n          fontSize: tokens.typography.fontSize.sm[0],\n          fontWeight: tokens.typography.fontWeight.medium,\n          color: 'var(--color-text)',\n          marginBottom: tokens.spacing[2],\n        }}>\n          Updated Task Description (optional)\n        </label>\n        <textarea\n          value={formData.description}\n          onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\n          placeholder=\"Leave empty to keep current description\"\n          style={{\n            width: '100%',\n            minHeight: '80px',\n            padding: tokens.spacing[3],\n            borderRadius: tokens.borderRadius.md,\n            border: '1px solid var(--color-border)',\n            backgroundColor: 'var(--color-surface)',\n            color: 'var(--color-text)',\n            fontSize: tokens.typography.fontSize.sm[0],\n            resize: 'vertical',\n          }}\n          rows={3}\n        />\n      </div>\n\n      {/* Tech Stack Selection */}\n      <div style={{ marginBottom: tokens.spacing[4] }}>\n        <label style={{\n          display: 'block',\n          fontSize: tokens.typography.fontSize.sm[0],\n          fontWeight: tokens.typography.fontWeight.medium,\n          color: 'var(--color-text)',\n          marginBottom: tokens.spacing[2],\n        }}>\n          Application Type\n        </label>\n        <select\n          value={formData.application_type}\n          onChange={(e) => setFormData(prev => ({\n            ...prev,\n            application_type: e.target.value,\n            tech_stack_id: '' // Reset tech stack when application type changes\n          }))}\n          style={{\n            width: '100%',\n            padding: tokens.spacing[3],\n            borderRadius: tokens.borderRadius.md,\n            border: '1px solid var(--color-border)',\n            backgroundColor: 'var(--color-surface)',\n            color: 'var(--color-text)',\n            fontSize: tokens.typography.fontSize.sm[0],\n          }}\n        >\n          <option value=\"\">Keep current tech stack / Let AI choose</option>\n          {applicationTypes.map(type => (\n            <option key={type.id} value={type.id}>\n              {type.label} - {type.description}\n            </option>\n          ))}\n        </select>\n      </div>\n\n      {/* Tech Stack - Only show if application type is selected */}\n      {formData.application_type && (\n        <div style={{ marginBottom: tokens.spacing[4] }}>\n          <label style={{\n            display: 'block',\n            fontSize: tokens.typography.fontSize.sm[0],\n            fontWeight: tokens.typography.fontWeight.medium,\n            color: 'var(--color-text)',\n            marginBottom: tokens.spacing[2],\n          }}>\n            Tech Stack\n          </label>\n          <select\n            value={formData.tech_stack_id}\n            onChange={(e) => setFormData(prev => ({ ...prev, tech_stack_id: e.target.value }))}\n            style={{\n              width: '100%',\n              padding: tokens.spacing[3],\n              borderRadius: tokens.borderRadius.md,\n              border: '1px solid var(--color-border)',\n              backgroundColor: 'var(--color-surface)',\n              color: 'var(--color-text)',\n              fontSize: tokens.typography.fontSize.sm[0],\n            }}\n          >\n            <option value=\"\">Let AI choose tech stack</option>\n            {availableTechStacks.map(stack => (\n              <option key={stack.id} value={stack.id}>\n                {stack.name} - {stack.description}\n              </option>\n            ))}\n          </select>\n        </div>\n      )}\n\n      {/* Additional Requirements */}\n      <div style={{ marginBottom: tokens.spacing[4] }}>\n        <label style={{\n          display: 'block',\n          fontSize: tokens.typography.fontSize.sm[0],\n          fontWeight: tokens.typography.fontWeight.medium,\n          color: 'var(--color-text)',\n          marginBottom: tokens.spacing[2],\n        }}>\n          Additional Requirements & Overrides\n        </label>\n        <textarea\n          value={formData.tech_preferences.additional_requirements}\n          onChange={(e) => setFormData(prev => ({\n            ...prev,\n            tech_preferences: {\n              ...prev.tech_preferences,\n              additional_requirements: e.target.value\n            }\n          }))}\n          placeholder=\"e.g., Use different database, add real-time features, specific frameworks...\"\n          style={{\n            width: '100%',\n            minHeight: '60px',\n            padding: tokens.spacing[3],\n            borderRadius: tokens.borderRadius.md,\n            border: '1px solid var(--color-border)',\n            backgroundColor: 'var(--color-surface)',\n            color: 'var(--color-text)',\n            fontSize: tokens.typography.fontSize.sm[0],\n            resize: 'vertical',\n          }}\n          rows={2}\n        />\n      </div>\n\n      {/* AI Parameters */}\n      <div style={{ \n        display: 'grid',\n        gridTemplateColumns: 'repeat(auto-fit, minmax(120px, 1fr))',\n        gap: tokens.spacing[4],\n        marginBottom: tokens.spacing[4],\n      }}>\n        <div>\n          <label style={{\n            display: 'block',\n            fontSize: tokens.typography.fontSize.sm[0],\n            fontWeight: tokens.typography.fontWeight.medium,\n            color: 'var(--color-text)',\n            marginBottom: tokens.spacing[2],\n          }}>\n            Max Depth\n          </label>\n          <select\n            value={formData.max_depth}\n            onChange={(e) => setFormData(prev => ({ ...prev, max_depth: parseInt(e.target.value) }))}\n            style={{\n              width: '100%',\n              padding: tokens.spacing[2],\n              borderRadius: tokens.borderRadius.md,\n              border: '1px solid var(--color-border)',\n              backgroundColor: 'var(--color-surface)',\n              color: 'var(--color-text)',\n              fontSize: tokens.typography.fontSize.sm[0],\n            }}\n          >\n            <option value={2}>2 levels</option>\n            <option value={3}>3 levels</option>\n            <option value={4}>4 levels</option>\n            <option value={5}>5 levels</option>\n          </select>\n        </div>\n\n        <div>\n          <label style={{\n            display: 'block',\n            fontSize: tokens.typography.fontSize.sm[0],\n            fontWeight: tokens.typography.fontWeight.medium,\n            color: 'var(--color-text)',\n            marginBottom: tokens.spacing[2],\n          }}>\n            Max Subtasks\n          </label>\n          <select\n            value={formData.max_subtasks}\n            onChange={(e) => setFormData(prev => ({ ...prev, max_subtasks: parseInt(e.target.value) }))}\n            style={{\n              width: '100%',\n              padding: tokens.spacing[2],\n              borderRadius: tokens.borderRadius.md,\n              border: '1px solid var(--color-border)',\n              backgroundColor: 'var(--color-surface)',\n              color: 'var(--color-text)',\n              fontSize: tokens.typography.fontSize.sm[0],\n            }}\n          >\n            <option value={5}>5 subtasks</option>\n            <option value={10}>10 subtasks</option>\n            <option value={15}>15 subtasks</option>\n            <option value={20}>20 subtasks</option>\n          </select>\n        </div>\n      </div>\n\n      {/* Options */}\n      <div style={{ marginBottom: tokens.spacing[6] }}>\n        <label style={{\n          display: 'flex',\n          alignItems: 'center',\n          gap: tokens.spacing[2],\n          cursor: 'pointer',\n          marginBottom: tokens.spacing[3],\n        }}>\n          <input\n            type=\"checkbox\"\n            checked={formData.requires_approval}\n            onChange={(e) => setFormData(prev => ({ ...prev, requires_approval: e.target.checked }))}\n            style={{\n              width: '16px',\n              height: '16px',\n              accentColor: tokens.colors.primary[500],\n            }}\n          />\n          <Text style={{ margin: 0, fontSize: tokens.typography.fontSize.sm[0] }}>\n            Pause for approval after decomposition\n          </Text>\n        </label>\n\n        <label style={{\n          display: 'flex',\n          alignItems: 'center',\n          gap: tokens.spacing[2],\n          cursor: 'pointer',\n        }}>\n          <input\n            type=\"checkbox\"\n            checked={formData.preserve_root_context}\n            onChange={(e) => setFormData(prev => ({ ...prev, preserve_root_context: e.target.checked }))}\n            style={{\n              width: '16px',\n              height: '16px',\n              accentColor: tokens.colors.primary[500],\n            }}\n          />\n          <Text style={{ margin: 0, fontSize: tokens.typography.fontSize.sm[0] }}>\n            Preserve existing tech stack and best practices (recommended)\n          </Text>\n        </label>\n      </div>\n\n      {/* Actions */}\n      <div style={{\n        display: 'flex',\n        justifyContent: 'flex-end',\n        gap: tokens.spacing[3],\n      }}>\n        <Button\n          variant=\"secondary\"\n          onClick={onClose}\n          disabled={isLoading}\n        >\n          Cancel\n        </Button>\n        <Button\n          variant=\"primary\"\n          onClick={handleSubmit}\n          loading={isLoading}\n        >\n          Restart Decomposition\n        </Button>\n      </div>\n    </Modal>\n  );\n};\n\n// Helper functions\nconst getStatusVariant = (status) => {\n  switch (status) {\n    case 'completed':\n      return 'success';\n    case 'in_progress':\n    case 'processing':\n      return 'info';\n    case 'awaiting_approval':\n      return 'danger';\n    case 'error':\n    case 'failed':\n      return 'danger';\n    default:\n      return 'warning';\n  }\n};\n\n\nexport default TaskBoard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}