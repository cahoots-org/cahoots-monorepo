# React Single Page Application Tech Stack
# Vite + React + TypeScript

name: react-spa
display_name: "React SPA"
description: "Single-page application with React, TypeScript, and Vite"
category: frontend

# Project structure
src_dir: src
test_dir: src/__tests__

# Commands
install_command: npm install
test_command: npm test
build_command: npm run build
start_command: npm run dev

# File patterns
source_pattern: "**/*.{ts,tsx}"
test_pattern: "**/*.test.{ts,tsx}"

# Conventions for LLM code generation
conventions: |
  Project Structure:
  - Entry point: src/main.tsx (React root render)
  - App shell: src/App.tsx (router and layout)
  - Pages: src/pages/{Name}Page.tsx (route components)
  - Components: src/components/{Name}/{Name}.tsx (reusable UI)
  - Hooks: src/hooks/use{Name}.ts (custom hooks)
  - Types: src/types/{name}.ts (shared TypeScript types)
  - Tests: src/__tests__/{name}.test.tsx (colocated tests)

  Code Style:
  - Functional components only (no class components)
  - Use TypeScript for all files
  - Props interfaces named {Component}Props
  - Export components as named exports, not default
  - Use React.FC only when needed for children typing

  State Management:
  - Local state: useState for simple values
  - Shared state: React Context for app-wide state
  - Server state: Custom hooks with fetch (or React Query pattern)
  - Forms: Controlled components with useState

  React Patterns:
  - Destructure props in function signature
  - Use early returns for conditional rendering
  - Keep components small and focused
  - Extract logic to custom hooks
  - Use useCallback/useMemo only when needed (not prematurely)

  Testing:
  - Use React Testing Library
  - Test user behavior, not implementation
  - Use screen.getByRole for accessibility
  - Avoid testing internal state
  - Mock API calls with msw or jest mocks

  Styling:
  - Use CSS modules or inline styles (no CSS-in-JS libraries)
  - Component-specific styles in {Name}.module.css
  - Use CSS custom properties for theming

# Initial project files
config_files:
  package.json: |
    {
      "name": "{{project_name}}",
      "version": "1.0.0",
      "type": "module",
      "scripts": {
        "dev": "vite",
        "build": "tsc && vite build",
        "preview": "vite preview",
        "test": "vitest run",
        "test:watch": "vitest"
      },
      "dependencies": {
        "react": "^18.2.0",
        "react-dom": "^18.2.0",
        "react-router-dom": "^6.21.1"
      },
      "devDependencies": {
        "@types/react": "^18.2.46",
        "@types/react-dom": "^18.2.18",
        "@vitejs/plugin-react": "^4.2.1",
        "typescript": "^5.3.3",
        "vite": "^5.0.10",
        "vitest": "^1.1.3",
        "@testing-library/react": "^14.1.2",
        "@testing-library/jest-dom": "^6.2.0",
        "jsdom": "^23.2.0"
      }
    }

  tsconfig.json: |
    {
      "compilerOptions": {
        "target": "ES2020",
        "useDefineForClassFields": true,
        "lib": ["ES2020", "DOM", "DOM.Iterable"],
        "module": "ESNext",
        "skipLibCheck": true,
        "moduleResolution": "bundler",
        "allowImportingTsExtensions": true,
        "resolveJsonModule": true,
        "isolatedModules": true,
        "noEmit": true,
        "jsx": "react-jsx",
        "strict": true,
        "noUnusedLocals": true,
        "noUnusedParameters": true,
        "noFallthroughCasesInSwitch": true
      },
      "include": ["src"],
      "references": [{ "path": "./tsconfig.node.json" }]
    }

  tsconfig.node.json: |
    {
      "compilerOptions": {
        "composite": true,
        "skipLibCheck": true,
        "module": "ESNext",
        "moduleResolution": "bundler",
        "allowSyntheticDefaultImports": true
      },
      "include": ["vite.config.ts"]
    }

  vite.config.ts: |
    import { defineConfig } from 'vite'
    import react from '@vitejs/plugin-react'

    export default defineConfig({
      plugins: [react()],
      test: {
        globals: true,
        environment: 'jsdom',
        setupFiles: './src/test/setup.ts',
      },
    })

  index.html: |
    <!DOCTYPE html>
    <html lang="en">
      <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>{{project_name}}</title>
      </head>
      <body>
        <div id="root"></div>
        <script type="module" src="/src/main.tsx"></script>
      </body>
    </html>

runner_image: node:20-slim
